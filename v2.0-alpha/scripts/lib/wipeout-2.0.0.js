// wipeout v2.0.0
// (c) Shane Connon 2015
// http://www.opensource.org/licenses/mit-license.php
// obsJs v0.0.1
// (c) Shane Connon 2015
// http://www.opensource.org/licenses/mit-license.php
// objJs v0.1.0
// (c) Shane Connon 2015
// http://www.opensource.org/licenses/mit-license.php
!function(){window.objjs={};var a=objjs.object=function(){},b={parents:[],children:[]};a.clearVirtualCache=function(a){if(!a)return b.parents.length=0,void(b.children.length=0);for(var c=0,d=b.children.length;d>c;c++)(b.children[c]===a||b.parents[c]===a)&&(b.children.splice(c,1),b.parents.splice(c,1))},a.useVirtualCache=!0,a.prototype._super=function(){var c=arguments.callee.caller,d=null;if(a.useVirtualCache){var e=b.children.indexOf(c);-1!==e&&(d=b.parents[e])}if(!d){for(var f=[],g=this.constructor.prototype;g;)f.push(g),g=Object.getPrototypeOf(g);f.reverse();for(var h=0,i=f.length;i>h;h++){if(f[h]===c.prototype)d=f[h-1].constructor;else for(var j in f[h]){if(f[h][j]===c)for(var k=h-1;k>=0;k--)if(f[k][j]!==c){d=f[k][j];break}if(d)break}if(d){a.useVirtualCache&&(b.children.push(c),b.parents.push(d));break}}if(!d)throw"Could not find method in parent class"}return d.apply(this,arguments)};a.extend=function(b){if(b.constructor===Function){var c=b;b={constructor:c,statics:{}};for(var d in b.constructor)b.statics[g]=b.constructor[g];for(var d in b.constructor.prototype)b[g]=b.constructor.prototype[g]}else if(b.constructor===Object)b.constructor=function(){this._super.apply(this,arguments)};else if(!b.constructor||b.constructor.constructor!==Function)throw'the property "constructor" must be a function';for(var e in this)this.hasOwnProperty(e)&&this[e]&&this[e].constructor===Function&&this[e]!==a.clearVirtualCache&&void 0===b.constructor[e]&&(b.constructor[e]=this[e]);var f=function(){this.constructor=b.constructor};f.prototype=this.prototype,b.constructor.prototype=new f;for(var g in b)if("constructor"!==g)if("statics"!==g)b.constructor.prototype[g]=b[g];else for(var h in b[g])b.constructor[h]=b[g][h];return b.constructor},a.getInheritanceChain=function(a){for(var b=[];a;)b.push(a),a=Object.getPrototypeOf(a.prototype),a&&(a=a.constructor);return b}}();

!function(){function a(a,b,d,e){return function(f){var g=obsjs.getObserver(a);if(f&&g.$bindingChanges)for(var h in g.$bindingChanges)if(d===g.$bindingChanges[h].fromObject&&f[f.length-1]===g.$bindingChanges[h].change)return;obsjs.captureChanges(d,function(){obsjs.utils.obj.setObject(e,d,obsjs.utils.obj.getObject(b,a))},function(b){obsjs.makeObservable(d);c(b,function(b){var c=obsjs.getObserver(d);if(c){c.$bindingChanges||(c.$bindingChanges={});var e=i();c.$bindingChanges[e]={change:b,fromObject:a},setTimeout(function(){delete c.$bindingChanges[e];for(var a in c.$bindingChanges)return;delete c.$bindingChanges},100)}})})}}window.obsjs={};var b=obsjs.useObjectObserve=Object.observe&&(!window.hasOwnProperty("useObjectObserve")||window.useObjectObserve),c=function(a,b,c){if(a){c=c||window;for(var d=0,e=a.length;e>d;d++)b.call(c,a[d],d)}},d=function(a,b,c){if(a&&(c=c||window,null!=a))for(var d in a)b.call(c,a[d],d)},e=function(a,b){a=a.split(".");var c=a.splice(0,a.length-1),d={};return d[a[a.length-1]]=b(),f(c.join("."),d),d[a[a.length-1]]},f=function(a,b){if(a=a.split("."),"obsjs"!==a[0])throw'Root must be "obsjs".';a.splice(0,1);var e=obsjs;c(a,function(a){e=e[a]||(e[a]={})}),b&&b instanceof Function&&(b=b()),d(b,function(a,b){e[b]=a})},g=/^\s+|\s+$/g,h=function(a){return a?a.replace(g,""):a};e("obsjs.utils.obj",function(){function a(a,b){b||(b=window);for(var c=0,d=a.length;d>c;c++)if(b=b[a[c]],null==b)return c===d-1?b:null;return b}function b(a,b){a.push(b);var c=new obsjs.disposable(function(){c&&(c=null,b=a.indexOf(b),-1!==b&&a.splice(b,1))});return c}var e=/\[\s*\d\s*\]$/g,f=function(a){a=a.split(".");for(var b,c=0;c<a.length;c++){a[c]=obsjs.utils.obj.trim(a[c]);var d=a[c].match(e);if(d&&d.length){(b=obsjs.utils.obj.trim(a[c].replace(e,"")))?a[c]=obsjs.utils.obj.trim(a[c].replace(e,"")):(a.splice(c,1),c--);for(var f=0,g=d.length;g>f;f++)a.splice(++c,0,parseInt(d[f].match(/\d/)[0]))}}return a},g=function(a){var b=[];return c(a,function(a){b.push(isNaN(a)?0===b.length?a:"."+a:"["+a+"]")}),b.join("")},i=function(b,c){return a(f(b),c)},j=function(b,c,d){var e={};return b=f(b),e.remainder=0>=d?b.splice(b.length+d,-1*d):b.splice(d,b.length-d),e.object=a(b,c,d),e},k=function(b,c,d){b=f(b),b.length>1&&(c=a(b.splice(0,b.length-1),c)),c&&(c[b[0]]=d)},l=function(){};return l.trim=h,l.addWithDispose=b,l.enumerateArr=c,l.enumerateObj=d,l.getObject=i,l.getPartialObject=j,l.setObject=k,l.splitPropertyName=f,l.joinPropertyName=g,l}),e("obsjs.disposable",function(){function a(a){a.$disposables||(a.$disposables={})}var b=objjs.object.extend(function(a){this._super(),a&&(a instanceof Function?this.registerDisposeCallback(a):this.registerDisposable(a))});return b.prototype.disposeOf=function(a){if(a instanceof Array){var b=!1;return c(a,function(a){b|=this.disposeOf(a)},this),b}return this.$disposables&&this.$disposables[a]?(this.$disposables[a](),delete this.$disposables[a]):!1},b.prototype.disposeOfAll=function(){if(this.$disposables)for(var a in this.$disposables)this.disposeOf(a)},b.prototype.registerDisposeCallback=function(){var b=0;return function(c){if(!c||c.constructor!==Function)throw"The dispose function must be a Function";a(this);var d=(++b).toString();return this.$disposables[d]=c,d}}(),b.prototype.registerDisposable=function(a){if(a){if(a.constructor!==Function||a.dispose||(a=a.call(this)),!(a&&a.dispose instanceof Function))throw"The disposable object must have a dispose(...) function";return this.registerDisposeCallback(a.dispose.bind(a))}},b.prototype.dispose=function(){this.disposeOfAll()},b}),e("obsjs.utils.executeCallbacks",function(){var a=obsjs.disposable.extend(function b(){if(this.constructor===b)throw"You cannot create an instance of an abstract class";this._super(),this.callbacks=[]});return a.prototype.addCallback=function(a){var b=obsjs.utils.obj.addWithDispose(this.callbacks,a);return this.registerDisposable(b),b},a.prototype._execute=function(){throw"Abstract methods must be implemented"},a.prototype.execute=function(){var a=this._execute();a&&!a.cancel&&c(this.callbacks.slice(),function(b){b.apply(null,a.arguments||[])})},a.prototype.dispose=function(){this._super(),this.callbacks.length=0},a}),e("obsjs.observeTypes.observeTypesBase",function(){var a=obsjs.utils.executeCallbacks.extend(function b(){if(this.constructor===b)throw"You cannot create an instance of an abstract class";this._super()});return a.prototype.getValue=function(){throw"Abstract methods must be implemented"},a.prototype._execute=function(){var a=this.val;return this.val=this.getValue(),{cancel:this.val===a,arguments:[a,this.val]}},a}),e("obsjs.observableBase",function(){var a=obsjs.disposable.extend(function(a){this._super(),this.$changeBatch=[],this.$forObject=a,this.$callbacks={}});return a.prototype.registerChangeBatch=function(a){this.$changeBatch.length||setTimeout(this.processChangeBatch.bind(this)),this.$changeBatch.push.apply(this.$changeBatch,a)},a.prototype.processChangeBatch=function(){var b={};c(this.$changeBatch,function(a){b[a.name]||(b[a.name]=[]),b[a.name].push(a)}),this.$changeBatch.length=0,obsjs.utils.observeCycleHandler.instance.execute(this.$forObject||this,function(){var e=[];d(b,function(b,c){this.$callbacks[c]&&e.push.apply(e,a.processChanges(this.$callbacks[c],b))},this),c(e,function(a){a()})}.bind(this))},a.processChanges=function(a,b){var d=[],e=[];c(a,function(a,c){if(a.evaluateOnEachChange)for(var c=0,f=b.length;f>c;c++)a.evaluateSingle(b,c)&&d.push(c);else e.push(function(){a.evaluateMultiple(b)&&d.push(c)})}),d.sort(function(a,b){return b>a});for(var f=0,g=d.length;g>f;f++)a.splice(d[f],1);return e},a.prototype.onNextPropertyChange=function(){throw"Abstract methods must be overridden"},a.prototype.captureChanges=function(a,b,d){if(d&&(d=obsjs.utils.obj.splitPropertyName(d)).length>1)return obsjs.captureChanges(obsjs.utils.obj.getObject(d.slice(0,d.length-1).join("."),this.$forObject||this),a,b,d[d.length-1]);d=d&&d.length?d[0]:void 0;var e=d?function(a){var e=[];c(a,function(a){a.name==d&&e.push(a)}),b(e)}:b.bind(this);return d&&this._init(d),this._captureChanges(a,e)},a.prototype._captureChanges=function(){throw"Abstract methods must be overridden"},a.prototype.bind=function(a,b,c){return obsjs.bind(this,a,b,c)},a.prototype.observeArray=function(a,b,c,d){var e,f,g=this.observe(a,function(a,f){e&&(this.disposeOf(e),e=null);var g={object:f||[],index:0,addedCount:f instanceof Array?f.length:0,removed:a instanceof Array?a:[],type:"splice"};if(d&&d.evaluateOnEachChange)b.call(c,g);else{var h=new obsjs.utils.compiledArrayChange([g],0,1);b.call(c,h.getRemoved(),h.getAdded(),h.getIndexes())}f instanceof obsjs.array&&(e=this.registerDisposable(f.observe(b,c,d)))},this);return(f=obsjs.utils.obj.getObject(a,this.$forObject||this))instanceof obsjs.array&&(e=this.registerDisposable(f.observe(b,c,d))),new obsjs.disposable(function(){e&&(this.disposeOf(e),e=null),g&&(g.dispose(),g=null)})},a.prototype.observe=function(a,b,c,d){if(/[\.\[]/.test(a)){var e=new obsjs.observeTypes.pathObserver(this.$forObject||this,a,b,c);return this.registerDisposable(e),e}this._init(a);var f=new obsjs.callbacks.propertyCallback(b,c,d);this.$callbacks[a]||(this.$callbacks[a]=[]),this.$callbacks[a].push(f),d&&d.activateImmediately?f.activate():this.onNextPropertyChange(a,function(a){f.activate(a)});var g={dispose:function(b){g&&(g=null,b?this.onNextPropertyChange(a,function(a){f.deactivate(a)}):f.deactivate())}.bind(this)};return this.registerDisposable(g),g},a.prototype._init=function(){throw"Abstract methods must be implemented"},a.prototype.dispose=function(){this._super(),delete this.$forObject;for(var a in this.$callbacks)delete this.$callbacks[a]},a.prototype.computed=function(a,b,c){var d=new obsjs.observeTypes.computed(b,this,c);return d.bind(this.$forObject||this,a),this.registerDisposable(d),d},a.prototype.del=function(a){delete(this.$forObject||this)[a]},a.afterObserveCycle=function(a){return obsjs.utils.observeCycleHandler.instance.afterObserveCycle(a)},a.beforeObserveCycle=function(a){return obsjs.utils.observeCycleHandler.instance.beforeObserveCycle(a)},a.afterNextObserveCycle=function(a,b){if(0===obsjs.utils.observeCycleHandler.instance.length&&!b)return void a();var c=obsjs.utils.observeCycleHandler.instance.afterObserveCycle(function(){c.dispose(),a()});return c},a.beforeNextObserveCycle=function(a){var b=obsjs.utils.observeCycleHandler.instance.beforeObserveCycle(function(){b.dispose(),a()});return b},a}),e("obsjs.callbacks.changeCallback",function(){var a=objjs.object.extend(function(a){this._super(),this.evaluateOnEachChange=a});return a.dispose={},a.prototype.activate=function(a){if(this._activated||this._activatingChange)throw"This callback has been activated";arguments.length?this._activatingChange=a:this._activated=!0},a.prototype.deactivate=function(a){if(this._deactivatingChange)throw"This callback has a deactivate pending";arguments.length?this._deactivatingChange=a:this._activated=!1},a.prototype.evaluateSingle=function(b,c){if(this.evaluateOnEachChange){if(this._activated===!1||this.hasOwnProperty("_deactivatingChange")&&this._deactivatingChange===b[c])return this._activated=!1,a.dispose;if(!this.hasOwnProperty("_activated")){if(!this.hasOwnProperty("_activatingChange")||this._activatingChange!==b[c])return;this._activated=!0,delete this._activatingChange}this._evaluateSingle(b,c)}},a.prototype._evaluateSingle=function(){throw"Abstract methods must be implemented"},a.prototype.evaluateMultiple=function(b){if(!this.evaluateOnEachChange&&b.length){if(this._activated===!1)return a.dispose;var c=0,d=b.length,e=void 0;return this.hasOwnProperty("_activated")||(c=b.indexOf(this._activatingChange),-1!==c&&(this._activated=!0,delete this._activatingChange)),this._deactivatingChange&&(d=b.indexOf(this._deactivatingChange),-1===d?d=b.length:(e=a.dispose,this._activated=!1,delete this._deactivatingChange)),-1!==c&&d>c&&this._evaluateMultiple(b,c,d),e}},a.prototype._evaluateMultiple=function(){throw"Abstract methods must be implemented"},a}),e("obsjs.arrayBase",function(){function a(a){return"number"==typeof a&&a%1===0?a:null===a?0:"boolean"==typeof a?a?1:0:"string"!=typeof a||isNaN(a=parseFloat(a))||a%1!==0?void 0:a}var b=objjs.object.extend.call(Array,function(a){if(Array.call(this),arguments.length&&!(arguments[0]instanceof Array))throw"The initial values must be an array";if(this.$disposables=[],this.$boundArrays=[],this.$callbacks=[],this.$changeBatch=[],this.$length=a?a.length:0,a)for(var b=0,c=a.length;c>b;b++)this[b]=a[b]});b.prototype._super=objjs.object.prototype._super,b.extend=objjs.object.extend,b.isValidArrayChange=function(a){return"splice"===a.type||!isNaN(parseInt(a.name))},b.prototype.captureChanges=function(){throw"Abstract methods must be overridden"},b.prototype.onNextArrayChange=function(){throw"Abstract methods must be implemented"},b.prototype.processChangeBatch=function(){var a=this.$changeBatch.slice();this.$changeBatch.length=0,obsjs.utils.observeCycleHandler.instance.execute(this,function(){c(obsjs.observableBase.processChanges(this.$callbacks,a),function(a){a()})}.bind(this))},b.prototype.registerChangeBatch=function(a){for(var c=a.length-1;c>=0;c--)b.isValidArrayChange(a[c])||a.splice(c,1);return obsjs.observableBase.prototype.registerChangeBatch.call(this,a)},Object.defineProperty(b.prototype,"length",{set:function(b){if(void 0===(b=a(b)))throw RangeError("Invalid array length");if(b!==this.$length){if(!this.__alteringArray)if(b>this.$length){var c=new Array(b-this.length+2);c[0]=this.length,c[1]=0,this.splice.apply(this,c)}else b<this.$length&&this.splice(b,this.length-b);this.$length=b}},get:function(){return this.$length}}),b.prototype._init=function(){throw"Abstract methods must be implemented"},b.prototype.observe=function(a,b,c){if("string"==typeof arguments[0]){var d=Array.prototype.slice.call(arguments);return d.splice(0,0,this),obsjs.observe.apply(null,d)}return this.addCallback(new obsjs.callbacks.arrayCallback(a,b,c))},b.prototype.disposableFor=function(a){var b={dispose:function(c){b&&(b=null,c?this.onNextArrayChange(function(b){a.deactivate(b)}):a.deactivate())}.bind(this)};return b};var d="obsjs-do-not-apply-to";return b.prototype.alteringArray=function(a,b){if(this.__alteringArray)throw"Calls to alteringArray must be synchronus and not nested.";try{return this.__alteringArray=!0,c(this.$boundArrays,function(c){if(c[d])throw"Circular reference in array bindings found";this[d]!==c&&(c[d]=this,c[a].apply(c,b))},this),Array.prototype[a].apply(this,b)}finally{this.__alteringArray=!1,c(this.$boundArrays,function(a){delete a[d]})}},b.copyAll=function(a,b,d){var e;d?(e=[],c(a,function(a){e.push(d(a))})):e=a.slice(),e.splice(0,0,0,b.length),b.splice.apply(b,e)},b.prototype.bind=function(a){return a&&-1===this.$boundArrays.indexOf(a)?(this.$boundArrays.push(a),a instanceof obsjs.array&&-1!==a.$boundArrays.indexOf(this)||b.copyAll(this,a),new obsjs.disposable(function(){if(a){var b;-1!==(b=this.$boundArrays.indexOf(a))&&this.$boundArrays.splice(b,1),a=null}}.bind(this))):void 0},b.prototype.addCallback=function(a){this._init(),this.$callbacks.push(a),this.onNextArrayChange(function(b){a.activate(b)});var b=this.disposableFor(a);return this.$disposables.push(b),b},b.prototype.dispose=function(){c(this.$disposables,function(a){a.dispose()}),this.$disposables.length=0,this.$boundArrays.length=0,this.$callbacks.length=0},b}),b?e("obsjs.array",function(){var a=obsjs.arrayBase.extend(function(){this._super.apply(this,arguments)});return a.prototype.onNextArrayChange=function(a){var b=function(c){if(b)for(var d=0,e=c.length;e>d;d++)if(obsjs.arrayBase.isValidArrayChange(c[d]))return Array.unobserve(this,b),b=null,void a(c[d])}.bind(this);Array.observe(this,b)},a.prototype.captureArrayChanges=function(a,b){var c=function(a){a=a.slice();for(var c=a.length-1;c>=0;c--)obsjs.arrayBase.isValidArrayChange(a[c])||a.splice(c,1);b(a)};Array.observe(this,c),a(),Array.unobserve(this,c)},a.prototype._init=function(){this.__subscription||(this.__subscription=this.registerChangeBatch.bind(this),Array.observe(this,this.__subscription))},a.prototype.dispose=function(){this._super(),this.__subscription&&(Array.unobserve(this,this.__subscription),delete this.__subscription)},a}):e("obsjs.array",function(){var a=obsjs.arrayBase.extend(function(){this._super.apply(this,arguments),this.$onNextArrayChanges=[],this.$captureCallbacks=[]});return a.prototype.captureArrayChanges=function(a,b){var c=function(a){a=a.slice();for(var c=a.length-1;c>=0;c--)obsjs.arrayBase.isValidArrayChange(a[c])||a.splice(c,1);b(a)};this.$captureCallbacks.push(c),a(),this.$captureCallbacks.splice(this.$captureCallbacks.indexOf(c),1)},a.prototype.registerChangeBatch=function(a){for(var b=0,d=a.length;d>b;b++)if(obsjs.arrayBase.isValidArrayChange(a[b])){c(this.$onNextArrayChanges.splice(0,this.$onNextArrayChanges.length),function(c){c(a[b])});break}return c(this.$captureCallbacks,function(b){b(a)}),this._super(a)},a.prototype.onNextArrayChange=function(a){this.$onNextArrayChanges.push(a)},a.prototype._init=function(){},a}),function(){var a=obsjs.array;a.prototype.replace=function(a,b){return this.splice(a,a>=this.length?0:1,b),b},a.prototype.pop=function(){return b||this.length&&this.registerChangeBatch([{addedCount:0,index:this.length-1,object:this,removed:[this[this.length-1]],type:"splice"}]),this.alteringArray("pop")},a.prototype.shift=function(){return b||this.length&&this.registerChangeBatch([{addedCount:0,index:0,object:this,removed:[this[0]],type:"splice"}]),this.alteringArray("shift")},a.prototype.remove=function(a){var b;-1!==(b=this.indexOf(a))&&this.splice(b,1)},a.prototype.push=function(){return b||this.registerChangeBatch([{addedCount:arguments.length,index:this.length,object:this,removed:[],type:"splice"}]),this.alteringArray("push",arguments)},a.prototype.reverse=function(){var a=this.length;if(!(2>a)){if(!b){for(var c,d=Math.floor(a/2),e=[],f=0;d>f;f++)e.push({name:f.toString(),object:this,oldValue:this[f],type:"update"}),c=a-f-1,e.push({name:c.toString(),object:this,oldValue:this[c],type:"update"});this.registerChangeBatch(e)}return this.alteringArray("reverse")}},a.prototype.sort=function(){if(!b){for(var a=this.slice(),c=[],d=this.alteringArray("sort",arguments),e=0,f=a.length;f>e;e++)a[e]!==this[e]&&c.push({name:e.toString(),object:this,oldValue:a[e],type:"update"});return this.registerChangeBatch(c),d}return this.alteringArray("sort",arguments)},a.prototype.splice=function(a,c){if(!b){for(var d=[],e=a,f=c+a>this.length?this.length:c+a;f>e;e++)d.push(this[e]);this.registerChangeBatch([{addedCount:arguments.length-2,index:a,object:this,removed:d,type:"splice"}])}return this.alteringArray("splice",arguments)}}(),e("obsjs.callbacks.arrayCallback",function(){var a=obsjs.callbacks.changeCallback.extend(function(a,b,c){this._super(c&&c.evaluateOnEachChange),this.useRawChanges=c&&c.useRawChanges,this.callback=a,this.context=b});return a.prototype._evaluateSingle=function(a,b){this.callback.call(this.context,a[b])},a.prototype._evaluateMultiple=function(a,b,c){if(this.useRawChanges)return void this.callback.call(this.context,a.slice(b,c));a.compiled||(a.compiled=[]);for(var d,e=0,f=a.compiled.length;f>e;e++)if(a.compiled[e].areEqual(b,c)){d=a.compiled[e];break}d||a.compiled.push(d=new obsjs.utils.compiledArrayChange(a,b,c)),this._evaluateArrayMultiple(d)},a.prototype._evaluateArrayMultiple=function(a){this.callback.call(this.context,a.getRemoved(),a.getAdded(),a.getIndexes())},a}),e("obsjs.callbacks.propertyCallback",function(){var a=obsjs.callbacks.changeCallback.extend(function(a,b,c){this._super(c&&c.evaluateOnEachChange),this.callback=a,this.context=b,this.evaluateIfValueHasNotChanged=c&&c.evaluateIfValueHasNotChanged,this.useRawChanges=c&&c.useRawChanges});return a.prototype._evaluateSingle=function(a,b){var c=a[b],d=a[b+1],e=d?d.oldValue:c.object[c.name];this.useRawChanges?this.callback.call(this.context,c):(this.evaluateIfValueHasNotChanged||e!==c.oldValue)&&this.callback.call(this.context,c.oldValue,e)},a.prototype._evaluateMultiple=function(a,b,c){var d=a[c]?a[c].oldValue:a[0].object[a[0].name];this.useRawChanges?this.callback.call(this.context,a.slice(b,c)):(this.evaluateIfValueHasNotChanged||d!==a[b].oldValue)&&this.callback.call(this.context,a[b].oldValue,d)},a});b?e("obsjs.observable",function(){var a=obsjs.observableBase.extend(function(a){this._super(a)});return a.prototype.onNextPropertyChange=function(a,b){var c=function(d){if(c)for(var e=0,f=d.length;f>e;e++)if(d[e].name==a){var g=c;return Object.unobserve(this.$forObject||this,g),c=null,void b(d[e])}}.bind(this);Object.observe(this.$forObject||this,c)},a.prototype._captureChanges=function(a,b){Object.observe(this.$forObject||this,b),a(),Object.unobserve(this.$forObject||this,b)},a.prototype._init=function(){this.__subscribeCallback||(this.__subscribeCallback=this.registerChangeBatch.bind(this),Object.observe(this.$forObject||this,this.__subscribeCallback))},a.prototype.dispose=function(){this._super(),this.__subscribeCallback&&(Object.unobserve(this.$forObject||this,this.__subscribeCallback),delete this.__subscribeCallback)},a}):e("obsjs.observable",function(){function a(a){return a.$observer||a}var b=obsjs.observableBase.extend(function(a){this._super(a),this.$observed={},this.$onNextPropertyChanges={},this.$captureCallbacks=[]});return b.prototype.onNextPropertyChange=function(a,b){(this.$onNextPropertyChanges[a]||(this.$onNextPropertyChanges[a]=[])).push(b)},b.prototype._captureChanges=function(a,b){this.$captureCallbacks.push(b),a(),this.$captureCallbacks.splice(this.$captureCallbacks.indexOf(b),1)},b.prototype._init=function(b){this.$observed.hasOwnProperty(b)||((this.$forObject||this).hasOwnProperty(b)&&(this.$observed[b]=(this.$forObject||this)[b]),Object.defineProperty(this.$forObject||this,b,{get:function(){return a(this).$observed[b]},set:function(d){var e=a(this),f={type:e.$observed.hasOwnProperty(b)?"update":"add",name:b,object:this,oldValue:e.$observed[b]};if(e.$observed[b]=d,e.$onNextPropertyChanges[b]){var g=e.$onNextPropertyChanges[b];delete e.$onNextPropertyChanges[b],setTimeout(function(){c(g,function(a){a(f)})})}e.addChange(f)},enumerable:!0,configurable:!0}))},b.prototype.addChange=function(a){this.__changeToken||(this.__changeToken=[],setTimeout(function(){var a=this.__changeToken;delete this.__changeToken,this.registerChangeBatch(a)}.bind(this))),this.__changeToken.push(a),c(this.$captureCallbacks,function(b){b([a])})},b.prototype.del=function(a){(this.$forObject||this)[a]=void 0,this._super(a)},b.prototype.dispose=function(){this._super();for(var a in this.$onNextPropertyChanges)delete this.$onNextPropertyChanges[a]},b});e("obsjs.observeTypes.computed",function(){var a=/\s*with\s*\(/g,b=/([^\s,]+)/g,d=/\/\/.*$/gm,e=/\/\*[\s\S]*?\*\//gm,f="((\\s*\\.\\s*([\\w\\$]*))|(\\s*\\[\\s*\\d\\s*\\]))+",g={},i=obsjs.observeTypes.observeTypesBase.extend(function k(a,d,e){if(this._super(),e=e||{},this.arguments=[],e.observeArrayElements&&(this.possibleArrays=[]),this.callbacks=[],this.callbackString=k.stripFunction(a),this.callbackFunction=a,this.context=d,!e.allowWith&&k.testForWith(this.callbackString))throw'You cannot use the "with" keyword in computed functions by default. To allow "with", use the allowWith flag on the options argument of the constructor, however, properties of the variable within the "with" statement cannot be monitored for change.';var f=this.callbackString.slice(this.callbackString.indexOf("(")+1,this.callbackString.indexOf(")")).match(b)||[];if(e.watchVariables&&f.length){var h;for(var i in e.watchVariables)-1!==(h=f.indexOf(i))&&(this.arguments[h]=e.watchVariables[i],f[h]=g)}if(c(f,function(a){if(a!==g)throw'Argument "'+a+'" must be added as a watch variable.'}),this.watchVariable("this",d,e.observeArrayElements),e.watchVariables)for(var i in e.watchVariables)this.watchVariable(i,e.watchVariables[i],e.observeArrayElements);this.execute()});i.testForWith=function(b){for(a.lastIndex=0;a.exec(b);)if(!/[\.\w\$]/.test(b[a.lastIndex-1]))return!0;return!1},i.prototype.rebuildArrays=function(){c(this.possibleArrays,function(a){a.disposeKeys&&a.disposeKeys.length&&(this.disposeOf(a.disposeKeys),a.disposeKeys.length=0);var b=a.path.length?obsjs.utils.obj.getObject(a.path,a.root):a.root;b instanceof Array&&(a.disposeKeys=a.disposeKeys||[],c(b,function(b){c(a.subPaths,function(c){a.disposeKeys.push(this.addPathWatchFor(b,c))},this)},this))},this)},i.prototype.getValue=function(){return this.possibleArrays&&this.rebuildArrays(),this.callbackFunction.apply(this.context,this.arguments)},i.prototype.bind=function(a,b){var c=i.createBindFunction(a,b),d=this.onValueChanged(c,!0);return d.registerDisposable(c),d},i.prototype.onValueChanged=function(a,b){var c=this.addCallback(a);return b&&a(void 0,this.val),c},i.stripFunction=function(a){a=a.toString().replace(d,"").replace(e,"");for(var b=/["']/g;b.exec(a);){var c="'"===a[b.lastIndex-1]?/'/g:/"/g;for(c.lastIndex=b.lastIndex;c.exec(a);){for(var f=0,g=c.lastIndex-2;"\\"===a[g];g--)f++;if(f%2===0){a=a.substr(0,b.lastIndex-1)+"#"+a.substr(c.lastIndex);break}}}return a},i.prototype.examineVariable=function(a,b){if(a=h(a),!/^[\$\w]+$/.test(a))throw"Invalid variable name. Variable names can only contain 0-9, a-z, A-Z, _ and $";for(var c,d,e,g,i=[],j=a.replace("$","\\$"),k=new RegExp((b?"(":"")+j+f+(b?")|"+j:""),"g"),l=[];null!==(c=k.exec(this.callbackString));)if(e=k.lastIndex-c[0].length,-1===(g=l.indexOf(d=c[0].replace(/\s/g,"")))||b){if(e>0){if(-1!==this.callbackString[e-1].search(/[\w\$]/))continue;for(var m=e-1;m>=0;m--){if("."===this.callbackString[m]){d=null;break}if(0!==this.callbackString[m].search(/\s/))break}}null!==d&&(-1===g&&(l.push(d),g=i.length,i.push({variableName:d,complexResults:[]})),b&&i[g].complexResults.push({name:c[0],index:e}))}return i},i.prototype.watchVariable=function(a,b,d){var e,f,g=this.examineVariable(a,d);c(g,function(a){if(e=obsjs.utils.obj.splitPropertyName(a.variableName),e.length>1&&this.addPathWatchFor(b,obsjs.utils.obj.joinPropertyName(e.slice(1))),d){var g;c(a.complexResults,function(a){(f=this.examineArrayProperties(a.name,a.index))&&(g?g.subPaths.push(f):this.possibleArrays.push(g={root:b,path:obsjs.utils.obj.joinPropertyName(e.slice(1)),subPaths:[f]}))},this)}},this)};var j=new RegExp("^\\s*\\[\\s*[\\w\\$]+\\s*\\]\\s*"+f);return i.prototype.examineArrayProperties=function(a,b){var c;return(c=j.exec(this.callbackString.substr(b+a.length)))?(c=c[0].substr(c[0].indexOf("]")+1).replace(/\s/g,""),"."===c[0]?c.substring(1):c):void 0},i.prototype.addPathWatchFor=function(a,b){var c,b=new obsjs.observeTypes.pathObserver(a,b,this.execute,this),d=this.execute.bind(this);return b.onValueChanged(function(a,b){c&&(c.dispose(),c=null),b instanceof obsjs.array&&(c=b.observe(d))},!0),this.registerDisposable(b)},i.createBindFunction=function(a,b){var c,d=function(e,f){var g=obsjs.utils.obj.getObject(b,a);f!==g&&(d.dispose(),f instanceof Array||g instanceof Array?c=obsjs.tryBindArrays(f,g):obsjs.utils.obj.setObject(b,a,f))};return d.dispose=function(){c&&(c.dispose(),c=null)},d},i}),e("obsjs.observeTypes.pathObserver",function(){var a=obsjs.observeTypes.observeTypesBase.extend(function(a,b,c,d){this._super(),this.forObject=a,this.property=b,this.path=obsjs.utils.obj.splitPropertyName(b),this.__pathDisposables=new Array(this.path.length),this.execute(),this.buildObservableChain(),this.init=!0,this.callbacks=[],c&&this.onValueChanged(c.bind(d||a),!1)});return a.prototype.onValueChanged=function(a,b){var c=this.addCallback(a);return b&&a(void 0,this.val),c},a.prototype.buildObservableChain=function(a){a=a||0;for(var b=a;b<this.path.length;b++)this.__pathDisposables[b]&&(this.__pathDisposables[b].dispose(),this.__pathDisposables[b]=null);var c=this.forObject,d=this;for(b=0;c&&a>b;b++)c=c[this.path[b]];for(;c&&b<this.path.length-1;b++){if((obsjs.canObserve(c)||c instanceof obsjs.array)&&c[this.path[b]]&&b>=a){var e=[c,function(a){return function(){d.buildObservableChain(a),d.execute()}}(b)];isNaN(this.path[b])&&e.splice(1,0,this.path[b]),this.__pathDisposables[b]=obsjs.tryObserve.apply(null,e)}c=c[this.path[b]]}obsjs.canObserve(c)&&(this.__pathDisposables[b]=obsjs.tryObserve(c,this.path[b],function(){this.execute()},this))},a.prototype.getValue=function(){for(var a=this.forObject,b=0,c=this.path.length;null!=a&&c>b;b++)a=a[this.path[b]];return b===c?a:null},a.prototype.dispose=function(){this._super();for(var a=0,b=this.__pathDisposables.length;b>a&&this.__pathDisposables[a];a++)this.__pathDisposables[a]&&this.__pathDisposables[a].dispose();this.__pathDisposables.length=0},a}),e("obsjs.utils.compiledArrayChange",function(){function a(a,b,c){this.beginAt=b,this.endAt=c,this.changes=[],this.build(a)}return a.prototype.buildIndexes=function(){if(!this.indexes){var a,b,d=[],e=[],f=[],g=[],h=[],i=[],j=this.added.slice();c(this.finalArray,function(b,c){(c>=this.beginArray.length||b!==this.beginArray[c])&&(-1!==(a=j.indexOf(b))?(g.push({value:b,index:c}),j.splice(a,1)):f[c]=b)},this);var k=this.removed.slice();c(this.beginArray,function(b,c){(c>=this.finalArray.length||b!==this.finalArray[c])&&(-1!==(a=k.indexOf(b))?(h.push({value:b,index:c}),k.splice(a,1)):(d.push(b),e.push(c)))},this);for(var l={};d.length;)a=d.shift(),b=f.indexOf(a),f[b]=l,i.push({value:a,from:e.shift(),to:b});this.indexes={moved:i,added:g,removed:h}}},a.prototype.build=function(a){if(this.removed=[],this.added=[],!a.length||this.beginAt>=this.endAt)return void(this.indexes={added:[],removed:[],moved:[]});for(var b,d,e,f,g=a[0].object.slice(),h=a.length-1;h>=this.beginAt;h--)b="splice"===a[h].type?a[h]:{addedCount:1,index:parseInt(a[h].name),removed:[a[h].oldValue]},h<this.endAt&&(this.finalArray||(this.finalArray=g.slice()),f=0,c(b.removed,function(a){-1===(e=this.added.indexOf(a))?(this.removed.splice(f,0,a),f++):this.added.splice(e,1)},this),f=0,c(g.slice(b.index,b.index+b.addedCount),function(a){-1===(e=this.removed.indexOf(a))?(this.added.splice(f,0,a),f++):this.removed.splice(e,1)},this),this.changes.splice(0,0,{index:b.index,added:g.slice(b.index,b.index+b.addedCount),removed:b.removed,change:a[h]})),d=b.removed.slice(),d.splice(0,0,b.index,b.addedCount),g.splice.apply(g,d);this.beginArray=g.slice()},a.prototype.areEqual=function(a,b){return this.beginAt===a&&this.endAt===b},a.prototype.getRemoved=function(){return this.removed.slice()},a.prototype.getAdded=function(){return this.added.slice()},a.prototype.getIndexes=function(){return this.indexes||this.buildIndexes(),{added:this.indexes.added.slice(),removed:this.indexes.removed.slice(),moved:this.indexes.moved.slice()}},a}),e("obsjs.utils.observeCycleHandler",function(){function a(a){a()}var b=obsjs.observable.extend(function(){this._super(),this.$afterObserveCycles=[],this.$beforeObserveCycles=[],this.length=0,this.observe("length",function(b,d){0===d&&c(this.$afterObserveCycles.slice(),a)},this,{evaluateOnEachChange:!1,evaluateIfValueHasNotChanged:!0})});return b.prototype.execute=function(a,b){try{this.before(a),b()}finally{this.after(a)}},b.prototype.before=function(b){b!==this&&(0===this.length&&c(this.$beforeObserveCycles.slice(),a),this.length++)},b.prototype.clear=function(){this.length>0&&(this.length=0)},b.prototype.after=function(a){a===this||this.length<=0||this.length--},b.prototype.afterObserveCycle=function(a){return obsjs.utils.obj.addWithDispose(this.$afterObserveCycles,a)},b.prototype.befreObserveCycle=function(a){return obsjs.utils.obj.addWithDispose(this.$beforeObserveCycles,a)},b.prototype.dispose=function(){this._super(),this.$afterObserveCycles.length=0,this.$beforeObserveCycles.length=0},b.instance=new b,b}),obsjs.getObserver=function(a){return null==a||a instanceof obsjs.observableBase?a:a.$observer instanceof obsjs.observableBase?a.$observer:null},obsjs.captureArrayChanges=function(a,b,c){if(!(a instanceof obsjs.array))throw"Only obsjs.array objects can have changes captured";return a.captureArrayChanges(b,c)},obsjs.captureChanges=function(a,b,c,d){return(a=obsjs.getObserver(a))?a.captureChanges(b,c,d):void b()},obsjs.makeObservable=function(a){if(arguments.length||(a={}),a instanceof obsjs.array){if(obsjs.getObserver(a))return a}else if(obsjs.canObserve(a))return a;if(a.$observer)throw"The $observer property is reserved";return Object.defineProperty(a,"$observer",{enumerable:!1,configurable:!1,value:new obsjs.observable(a),writable:!1}),a},obsjs.observe=function(a,b,c,d,e,f){return obsjs.makeObservable(a),obsjs.tryObserve(a,b,c,d,e,f)},obsjs.tryObserve=function(a,b,c,d,e){if(a instanceof obsjs.array){if(b instanceof Function)return a.observe(arguments[1],arguments[2],arguments[3]);"length"===b&&(b="$length"),obsjs.makeObservable(a)}var f=obsjs.getObserver(a);return f?f.observe(b,c,d,e):!1},obsjs.observeArray=function(a,b,c,d,e){return obsjs.makeObservable(a),obsjs.tryObserveArray(a,b,c,d,e)},obsjs.tryObserveArray=function(a,b,c,d,e){var f=obsjs.getObserver(a);return f?f.observeArray(b,c,d,e):!1},obsjs.tryBindArrays=function(a,b){if(!(a instanceof Array)&&null!=a||!(b instanceof Array)&&null!=b)throw"You cannot bind a value to an array. Arrays can only be bound to other arrays.";if(null!=a||null!=b)if(null==a)b.length=0;else if(null!=b){if(a instanceof obsjs.array)return a.bind(b);obsjs.array.copyAll(a,b)}};var i=function(){var a=0;return function(){return"ch-"+ ++a}}();obsjs.tryBind=function(b,c,d,e,f,g){function h(){i&&(k.disposseOf(i),disp=null);var f=obsjs.utils.obj.getObject(c,b),h=obsjs.utils.obj.getObject(e,d);f instanceof Array||h instanceof Array?i=k.registerDisposable(obsjs.tryBindArrays(f,h)):g?g=void 0:(j||(j=a(b,c,d,e))).apply(this,arguments)}var i,j,k=new obsjs.disposable;return k.registerDisposable(obsjs.tryObserve(b,c,h,null,{useRawChanges:!0})),h(),f&&k.registerDisposable(obsjs.tryBind(d,e,b,c,!1,!0)),k},obsjs.bind=function(a,b,c,d,e){return obsjs.makeObservable(a),obsjs.makeObservable(c),obsjs.tryBind(a,b,c,d,e)},obsjs.canObserve=function(a){return a instanceof obsjs.array||!!obsjs.getObserver(a)
},obsjs.del=function(a,b){var c=obsjs.getObserver(a);return c?c.del(b):void 0},obsjs.dispose=function(a){var b=obsjs.getObserver(a);return b?b.dispose():void 0}}();

!function(){function a(a,b){function c(){var a=[];return-1!==h&&(a[h]=i instanceof Function?i.apply(this,arguments):void 0!==i?i:arguments[0]),-1!==j&&(a[j]=k instanceof Function?k.apply(this,arguments):void 0!==k?k:arguments[1]),a}function d(){if(e)throw'You cannot add any more functionality using this DSL as this view model has already been built. You can still add methods to the view model by adding them directly to the build output, e.g.\nvar myClass = wo.viewModel("myClass").build();\nmyClass.doSomething = function () { ... };'}b=b||wipeout.viewModels.view;var e,g,h,i,j,k,l,m={},n=(g=b.toString().replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//gm,"")).slice(g.indexOf("(")+1,g.indexOf(")")).match(/([^\s,]+)/g)||[],o={statics:!0},p={},q={},r={},s={build:function(){if(e)return e.prototype;if(wipeout.utils.obj.getObject(a))throw a+" already exists.";h=n.indexOf("templateId"),-1!==h&&(i=m.templateId,delete m[h]),j=n.indexOf("model"),-1!==h&&(k=m.model,delete m[j]);var d=a.split(".");e=new Function("extend","getParentConstructorArgs","values","return function "+d[d.length-1]+" (templateId, model) {\n	extend.apply(this, getParentConstructorArgs.apply(this, arguments));\n\n	for (var i in values)\n		this[i] = values[i] instanceof Function ?\n			values[i].apply(this, arguments) :\n			values[i];\n}")(b,c,m),f(a,function(){return objjs.object.extend.call(b,e)}),o.statics=e;for(var g in o)e.prototype[g]=o[g];for(var g in p)e[g]=p[g];for(var g in r)e.addGlobalParser(g,r[g]);for(var g in q)e.addGlobalBindingType(g,q[g]);return o=void 0,p=void 0,q=void 0,l=void 0,s.build()},method:function(a,b){if(d(),!(b instanceof Function))return s.value(a,b);if(o[a])throw"You have already added a function: "+a;return o[a]=b,s},value:function(a,b){if(d(),"constructor"===a)return s.constructor(b);if(b instanceof Function)return s.method(a,b);if(m[a])throw"You have already added a value: "+a;return m[a]=b,s},dynamicValue:function(a,b){if(d(),"constructor"===a)return s.constructor(b);if(!(b instanceof Function))throw"A dynamic value must be a function which returns the value.";if(m[a])throw"You have already added a value: "+a;return m[a]=b,s},staticMethod:function(a,b){return s.staticValue(a,b)},staticValue:function(a,b){if(d(),p[a])throw"You have already added a static value: "+a;return p[a]=b,s},parser:function(a,c){if(d(),r[a])throw"A parser has already been set for this object";if(l=l||objjs.object.getInheritanceChain.apply(b),-1===l.indexOf(wipeout.base.bindable))throw"You must inherit from wipeout.base.bindable to use global parsers. Alternatively you can inherit from any view model, such as wo.view, wo.contentCOntrol, wo.itemsControl etc...";return r[a]=c,s},binding:function(a,c){if(d(),q[a])throw"A binding type has already been set for this object";if(l=l||objjs.object.getInheritanceChain(b),-1===l.indexOf(wipeout.base.bindable))throw"You must inherit from wipeout.base.bindable to use global parsers. Alternatively you can inherit from any view model, such as wo.view, wo.contentCOntrol, wo.itemsControl etc...";return q[a]=c,s},templateId:function(a,b){return b&&wipeout.template.engine.instance.compileTemplate(a,function(){}),s.value("templateId",a)},onInitialized:function(a){return s.method("onInitialized",a)},onModelChanged:function(a){return s.method("onModelChanged",a)},onRendered:function(a){return s.method("onRendered",a)},onUnrendered:function(a){return s.method("onUnrendered",a)},dispose:function(a){return s.method("dispose",a)},onApplicationInitialized:function(a){return s.method("onApplicationInitialized",a)}};return s}function b(a,b){if(!a||null==b)throw"Invalid input";if(wo[a])throw a+" is already taken!";wo[a]=b}window.wipeout={base:{object:objjs.object,observable:obsjs.observable,array:obsjs.array,disposable:obsjs.disposable}};var c=function(a){var b=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return b.onreadystatechange=function(){b.readyState==XMLHttpRequest.DONE&&(200!=b.status&&0!=b.status||!a.success?a.error&&a.error(b):a.success(b))},b.open(a.type||"GET",a.url||document.location.href,void 0!==a.async?a.async:!0),b.send(),b},d=function(a,b,c){if(a){c=c||window;for(var d=0,e=a.length;e>d;d++)b.call(c,a[d],d)}},e=function(a,b,c){if(a&&(c=c||window,null!=a))for(var d in a)b.call(c,a[d],d)},f=function(a,b){var c=window;if(a=m(a),"wipeout"===a[0]&&(c=wipeout,a.splice(0,1),!a.length))throw'Cannot override the "wipeout" variable';for(var d=0,e=a.length-1;e>d;d++)c=c[a[d]]||(c[a[d]]={});return c[a[a.length-1]]=b()},g=function(a,b){return f("wipeout.template.rendering.htmlAttributes.wo-"+a,b),b=function(){return wipeout.template.rendering.htmlAttributes["wo-"+a]},wipeout.template.rendering.htmlAttributes["wo-"+a].test instanceof Function&&f("wipeout.template.rendering.dynamicHtmlAttributes.wo-"+a,b),f("wipeout.template.rendering.htmlAttributes.data-wo-"+a,b)},h=/^\s+|\s+$/g,i=function(a){return a?a.replace(h,""):a},j=function(a){return a?i(a).toLowerCase():a},k=function(a){return null==a?!1:(a=j(a),!(!a||"false"===a||"0"===a))},l=function(a){if(!a)return a;for(var b,c=/\-/;-1!==(b=a.search(c));){if(b===a.length-1)return a.substr(0,b);a=a.substr(0,b)+a[b+1].toUpperCase()+a.substr(b+2)}return a},m=function(){var a=/\[\s*\d\s*\]$/g;return function(b){b=b.split(".");for(var c,d=0;d<b.length;d++){b[d]=i(b[d]);var e=b[d].match(a);if(e&&e.length){(c=i(b[d].replace(a,"")))?b[d]=i(b[d].replace(a,"")):(b.splice(d,1),d--);for(var f=0,g=e.length;g>f;f++)b.splice(++d,0,parseInt(e[f].match(/\d/)[0]))}}return b}}();f("wipeout.utils.obj",function(){var a=function(a){var b=[];return d(a,function(a){b.push(isNaN(a)?0===b.length?a:"."+a:"["+a+"]")}),b.join("")},b=function(a,b){return f(m(a),b)},f=function(a,b){b||(b=window);for(var c=0,d=a.length;d>c;c++)if(b=b[a[c]],null==b)return c===d-1?b:null;return b},g=function(a,b,c){return a=m(a),a.length>1&&(b=f(a.splice(0,a.length-1),b)),b?b[a[0]]=c:void 0},h=function(a){if(a instanceof Array)return a.slice();for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},n=function(a){return Math.floor(Math.random()*a)},o=function(a,b){if(b&&a)for(var c in b)a[c]=b[c];return a},p=function(){};return p.extend=o,p.camelCase=l,p.ajax=c,p.parseBool=k,p.trimToLower=j,p.trim=i,p.enumerateArr=d,p.enumerateObj=e,p.getObject=b,p.setObject=g,p.splitPropertyName=m,p.joinPropertyName=a,p.copyArray=h,p.random=n,p}),f("wipeout.settings",function(){function a(a){e(wipeout.settings,function(a,b){delete wipeout.settings[b]}),e(a,function(a,b){wipeout.settings[b]=a})}return a.asynchronousTemplates=!0,a.displayWarnings=!0,a.useElementClassName=!1,a.wipeoutAttributes={viewModelName:"wo-view-model"},a}),f("wipeout.htmlBindingTypes.viewModelId",function(){return function(a,b,c){var d=c.$this===a?c.$parent:c.$this;d instanceof wipeout.viewModels.view&&(d.templateItems[b.value()]=a);var e=wipeout.htmlBindingTypes.nb(a,b,c)||new obsjs.disposable;return e.registerDisposeCallback(function(){d instanceof wipeout.viewModels.view&&d.templateItems[b.value()]===a&&delete d.templateItems[b.value()]}),e}}),f("wipeout.template.initialization.parsers",function(){function a(){}return a.json=function(a,b,c){return JSON.parse(a)},a.string=function(a,b,c){return a},a.bool=function(a,b,c){var d=j(a);return d?"false"!==d&&"0"!==d:!1},a["int"]=function(a,b,c){return parseInt(i(a))},a["float"]=function(a,b,c){return parseFloat(i(a))},a.regexp=function(a,b,c){return new RegExp(i(a))},a.date=function(a,b,c){return new Date(i(a))},a.template=function(a){return a},a.template.useRawXmlValue=!0,a.j=a.json,a.s=a.string,a.b=a.bool,a.i=a["int"],a.f=a["float"],a.r=a.regexp,a.d=a.date,a}),f("wipeout.template.initialization.compiledInitializer",function(){function a(b){this.setters={},e(b.attributes,this.addAttribute,this),d(b,this.addElement,this),this.setters.model||(this.setters.model=a.modelSetter||(a.modelSetter=a.createPropertyValue("model",new wipeout.wml.wmlAttribute("$parent ? $parent.model : null"))))}a.getPropertyFlags=function(a){var b=wipeout.template.rendering.compiledTemplate.getPropertyFlags(a);return b.name=wipeout.utils.obj.camelCase(b.name),b},a.prototype.addElement=function(b){if(1===b.nodeType){var c=wipeout.utils.viewModels.getElementName(b);if(c=a.getPropertyFlags(c).name,this.setters.hasOwnProperty(c))throw'The property "'+c+'" has been set more than once.';for(var e in b.attributes)if("value"===e||0===e.indexOf("value--"))return d(b,function(a){if(3!==a.nodeType||!a.serialize().match(/^\s*$/))throw"You cannot set the value both in attributes and with elements."}),void(this.setters[c]=a.createPropertyValue(c,b.attributes[e],a.getPropertyFlags(e).flags));var f=b.attributes.parser||b.attributes.parsers;if(!f&&b._parentElement&&b._parentElement.name){var g=wipeout.utils.obj.getObject(wipeout.utils.obj.camelCase(b._parentElement.name));g&&g.getGlobalParser&&(f=g.getGlobalParser(c))}if(!f)for(var h=0,i=b.length;i>h;h++)if(1===b[h].nodeType){var j=wipeout.utils.viewModels.getViewModelConstructor(b[h]);if(!j)throw'Cannot create an instance of element: "'+b[h].name+'"';return void(this.setters[c]=a.createPropertyValue(c,{xml:b[h],constructor:j.constructor},["templateElementSetter"]))}f&&f.constructor===Function?(this.setters[c]=a.createPropertyValue(c,b),this.setters[c].parser=f):this.setters[c]=f?a.createPropertyValue(c,b,a.getPropertyFlags("--"+f.value).flags):a.createPropertyValue(c,b)}};var b="$wipeout_binding_type";return a.createPropertyValue=function(a,c,d){var e,f;if(d)for(var g=0,h=d.length;h>g;g++)if(wipeout.htmlBindingTypes[d[g]]){if(f)throw"The binding type has already been set for this element";f=d[g]}else if(wipeout.template.initialization.parsers[d[g]]){if(e)throw"The parser has already been set for this element";e=d[g]}var i=new wipeout.template.initialization.viewModelPropertyValue(a,c,e);return i[b]=f,i},a.prototype.addAttribute=function(b,c){if(c=a.getPropertyFlags(c),this.setters[c.name])throw'The property "'+c.name+'" has been set more than once.';this.setters[c.name]=a.createPropertyValue(c.name,b,c.flags)},a.prototype.initialize=function(b,c){var e=this.setters.model===a.modelSetter&&null!=b.model?[]:this.applyToViewModel("model",b,c);for(var f in this.setters)"model"!==f&&e.push.apply(e,this.applyToViewModel(f,b,c));return function(){d(e.splice(0,e.length),function(a){a&&a.dispose()})}},a.prototype.applyToViewModel=function(b,c,d){if(!this.setters[b])return[];var e=a.getBindingType(this.setters[b],c);if(!wipeout.htmlBindingTypes[e])throw'Invalid binding type :"'+e+'" for property: "'+b+'".';var f=[];return f.push.apply(f,this.setters[b].prime(c,function(){var a=wipeout.htmlBindingTypes[e](c,this.setters[b],d);a&&a.dispose instanceof Function?f.push(a):a instanceof Function&&f.push({dispose:a})}.bind(this))),f},a.getBindingType=function(a,c){return a[b]||c instanceof wipeout.base.bindable&&c.getGlobalBindingType(a.name)||"ow"},a}),f("wipeout.utils.dictionary",function(){var a=wipeout.base.object.extend(function(){this.__keyArray=[],this.__valueArray=[]});return a.prototype.add=function(a,b){var c=this.__keyArray.indexOf(a);return-1===c?(this.__keyArray.push(a),this.__valueArray.push(b)):this.__valueArray[c]=b,b},a.prototype.length=function(){return this.__keyArray.length},a.prototype.keys=function(){return this.keys_unsafe().slice()},a.prototype.keys_unsafe=function(){return this.__keyArray},a.prototype.remove=function(a){var b;return-1!==(b=this.__keyArray.indexOf(a))?(this.__valueArray.splice(b,1),this.__keyArray.splice(b,1),!0):!1},a.prototype.value=function(a){return this.__valueArray[this.__keyArray.indexOf(a)]},a}),f("wipeout.base.bindable",function(){var a=wipeout.base.observable.extend(function(){this._super()}),b="__wipeoutGlobalParser_";a.addGlobalParser=function(a,c){if("string"==typeof c&&(c=wipeout.template.initialization.parsers[c]),!(c instanceof Function))throw"Invalid parser. Parsers must be either a string which points to wipeout parser, or a function which will parse the data";var d=b+a;if(this.prototype.hasOwnProperty(d)){if(this.prototype[d]===c)return;throw"A global parser has already been defined for this property"}this.prototype[d]=c},a.prototype.addGlobalParser=function(b,c){return a.addGlobalParser.apply(this.constructor,arguments)};var c="__wipeoutGlobalBinding_";return a.addGlobalBindingType=function(a,b){if("string"!=typeof b||!wipeout.htmlBindingTypes[b])throw"Invalid binding type. Binding types must be a string which points to wipeout binding type";var d=c+a;if(this.prototype.hasOwnProperty(d)){if(this.prototype[d]===b)return;throw"A global binding has already been defined for this property"}this.prototype[d]=b},a.prototype.addGlobalBindingType=function(b,c){return a.addGlobalBindingType.apply(this.constructor,arguments)},a.prototype.getGlobalParser=function(a){return this[b+a]},a.prototype.getGlobalBindingType=function(a){return this[c+a]},a.getGlobalParser=function(a){return this.prototype[b+a]},a.getGlobalBindingType=function(a){return this.prototype[c+a]},a}),f("wipeout.viewModels.view",function(){var a=wipeout.base.bindable.extend(function(a,b){this._super(),this.shareParentScope=!1,this.templateItems={},this.templateId=a,this.observe("model",this._onModelChanged,this,{activateImmediately:!0}),this.model=null==b?null:b,this.$routedEventSubscriptions=[],this.$synchronusTemplateChange=new wipeout.events.event});return a.addGlobalParser("id","string"),a.addGlobalBindingType("id","viewModelId"),a.prototype.getParent=function(){var a=this.getRenderContext();return a?a.$this===this?a.$parent:a.$this:null},a.prototype.getParents=function(){var a=this.getRenderContext();if(!a)return[];var b=a.$parents.slice();return a.$this!==this&&b.splice(0,0,a.$this),b},a.prototype.getRenderContext=function(){return this.$domRoot&&this.$domRoot.renderContext||null},a.prototype._onModelChanged=function(a,b){a!==b&&this.onModelChanged(b)},a.prototype.onModelChanged=function(a){if(this.disposeOf(this.$modelRoutedEventKey),this.$modelRoutedEventKey=null,a instanceof wipeout.events.routedEventModel){var b=a.__triggerRoutedEventOnVM.register(this._onModelRoutedEvent,this);this.$modelRoutedEventKey=this.registerDisposable(b)}},a.prototype._onModelRoutedEvent=function(a){if(!(a.routedEvent instanceof wipeout.events.routedEvent))throw"Invaid routed event";this.triggerRoutedEvent(a.routedEvent,a.eventArgs)},a.prototype.dispose=function(){this._super(),d(this.$routedEventSubscriptions.splice(0,this.$routedEventSubscriptions.length),function(a){a.dispose()})},a.prototype.synchronusTemplateChange=function(a){arguments.length&&(this.templateId=a),this.$synchronusTemplateChange.trigger()},a.visualGraph=function(a,b){throw"TODO"},a.prototype.onRendered=function(a,b){},a.prototype.onUnrendered=function(){},a.prototype.onApplicationInitialized=function(){},a.prototype.onInitialized=function(){},a}),f("wipeout.events.routedEvent",function(){var a=function b(){return this instanceof b?void 0:new b};return a.prototype.trigger=function(a,b){a.triggerRoutedEvent(this,new wipeout.events.routedEventArgs(b,a))},a.prototype.unRegister=function(a,b,c){return b.unRegisterRoutedEvent(this,a,c)},a.prototype.register=function(a,b,c){return b.registerRoutedEvent(this,a,c)},a}),f("wipeout.events.routedEventArgs",function(){var a=function(a,b){this.handled=!1,this.data=a,this.originator=b};return a}),f("wipeout.events.routedEventRegistration",function(){var a=function(a){this.routedEvent=a,this.event=new wipeout.events.event};return a.prototype.dispose=function(){this.event.dispose()},a}),f("wipeout.template.rendering.renderedContent",function(){var a=obsjs.disposable.extend(function(a,b,c){this._super(),b=wipeout.utils.obj.trim(b),this.parentRenderContext=c,this.openingTag=document.createComment(" "+b+" "),this.openingTag.wipeoutOpening=this,this.closingTag=document.createComment(" /"+b+" "),this.closingTag.wipeoutClosing=this,a.parentNode.insertBefore(this.openingTag,a),a.parentNode.insertBefore(this.closingTag,a),a.parentNode.removeChild(a)});return a.prototype.rename=function(a){this.openingTag.nodeValue=" "+a+" ",this.closingTag.nodeValue=" /"+a+" "},a.prototype.renderArray=function(a){this.asynchronous&&(this.asynchronous.cancel(),delete this.asynchronous),this.unRender();var b=new wipeout.template.rendering.renderedArray(a,this);this.disposeOfBindings=b.dispose.bind(b),a instanceof wipeout.base.array&&b.registerDisposable(a.observe(b.render,b,{useRawChanges:!0})),b.render([{type:"splice",addedCount:a.length,removed:[],index:0}])},a.prototype.render=function(a,b){return a instanceof Array?void this.renderArray(a):(this.unRender(),this.viewModel=a,void(null!=this.viewModel&&(this.renderContext=this.parentRenderContext?this.parentRenderContext.contextFor(this.viewModel,b):new wipeout.template.context(this.viewModel,null,b),this.viewModel instanceof wipeout.viewModels.view?(this.templateChangeKey=this.registerDisposable(this.viewModel.$synchronusTemplateChange.register(this.templateHasChanged,this)),this.viewModel.$domRoot=this,this.templateObserved=this.viewModel.observe("templateId",this._template,this,{activateImmediately:!0}),this.viewModel.templateId&&this.template(this.viewModel.templateId)):this.appendHtml(this.viewModel.toString()))))},a.prototype.templateHasChanged=function(){this.template(this.viewModel.templateId)},a.prototype._template=function(a,b){this.template(b)},a.prototype.unRender=function(a){this.unTemplate(a),this.templateObserved&&(this.templateObserved.dispose(),delete this.templateObserved),this.templateChangeKey&&(this.disposeOf(this.templateChangeKey),delete this.templateChangeKey),this.viewModel instanceof wipeout.viewModels.view&&delete this.viewModel.$domRoot,delete this.renderContext,delete this.viewModel},a.prototype.unTemplate=function(a){if(delete this.currentTemplate,this.disposeOfBindings&&(this.disposeOfBindings(),delete this.disposeOfBindings),!a)for(var b;(b=this.openingTag.nextSibling)&&b!==this.closingTag;)1===b.elementType&&(b.innerHTML=""),b.parentNode.removeChild(this.openingTag.nextSibling)},a.prototype.template=function(a){if(this.asynchronous&&this.asynchronous.cancel(),this.currentTemplate!==a&&(this.__initialTemplate&&this.unTemplate(),a&&(this.asynchronous=wipeout.template.engine.instance.compileTemplate(a,function(c){delete this.asynchronous,b&&(b.parentNode.removeChild(b),b=null),this.currentTemplate=a,this.disposeOfBindings=c.quickBuild(this.appendHtml.bind(this),this.renderContext),this.__initialTemplate=!0,this.viewModel.onRendered()}.bind(this)),this.asynchronous))){var b=wipeout.utils.html.createTemplatePlaceholder(this.viewModel);this.closingTag.parentNode.insertBefore(b,this.closingTag)}},a.prototype.dispose=function(a){this._super(),this.closingTag&&(this.unRender(a),a||this.detatched||(this.closingTag.parentNode.removeChild(this.closingTag),this.openingTag.parentNode.removeChild(this.openingTag)),delete this.detatched,delete this.closingTag.wipeoutClosing,delete this.openingTag.wipeoutOpening,delete this.closingTag,delete this.openingTag)},a.prototype.appendHtml=function(a){if(this.openingTag&&1===this.openingTag.nodeType)this.openingTag.insertAdjacentHTML("afterend",a);else{var b=document.createElement("script");this.closingTag.parentNode.insertBefore(b,this.closingTag),b.insertAdjacentHTML("afterend",a),b.parentNode.removeChild(b)}},a.getParentElement=function(a){for(var b=a.wipeoutClosing?a.wipeoutClosing.openingTag:a;b=b.previousSibling;)if(b.wipeoutClosing)b=b.wipeoutClosing.openingTag;else if(b.wipeoutOpening)return b;return a.parentNode},a}),f("wipeout.template.propertyValue",function(){var a=objjs.object.extend(function(a,b,c){if(this._super(),this.name=a,this._value=b,this.parser=null,c instanceof Function)this.parser=c;else if(c){if(!wipeout.template.initialization.parsers[c])throw"Invalid parser: "+c;this.parser=wipeout.template.initialization.parsers[c]}});return a.prototype.value=function(){return this._value},a.prototype.buildGetter=function(){if(!this._getter){var a,b=wipeout.utils.jsParse.removeCommentsTokenStringsAndBrackets(a=this.value()),c=b.output.split("=>");if(c.length>2)throw"Invalid attribute value: "+a+". You may only include 1 filter.";if(2===c.length){if(c[1]=i(c[1]),!wipeout.template.filters[c[1]])throw"Invalid filter: "+c[1];a=wipeout.template.filters[c[1]].parentToChild?'wipeout.template.filters["'+c[1]+'"].parentToChild('+c[0]+")":c[0].split(",")[0]}this._getter=wipeout.template.context.buildGetter(b.addTokens(a))}return this._getter},a.prototype.get=function(a,b){var c=this.getParser(b);return c?c(c.useRawXmlValue?this._value:this.value(),this.name,a):this.buildGetter().apply(null,a.asGetterArgs())},a.prototype.buildSetter=function(){if(!this.hasOwnProperty("_setter")){var a,b,c=wipeout.utils.jsParse.removeCommentsTokenStringsAndBrackets(a=this.value()),d=c.output.split("=>");if(d.length>2)throw"Invalid attribute value: "+a+". You may only include 1 filter.";if(2===d.length){if(d[1]=i(d[1]),!wipeout.template.filters[d[1]])throw"Invalid filter: "+d[1];wipeout.template.filters[d[1]].childToParent?(b='wipeout.template.filters["'+d[1]+'"].childToParent',d=d[0].split(/\s*\,\s*/),a=c.addTokens(d[0]),d[0]="arguments[5]",b+="("+d.join(", ")+")"):a=c.addTokens(d[0].split(",")[0])}var e=/\.\s*[\w\$]+\s*$/.exec(a);if(e){var f=wipeout.template.context.buildGetter(a.substring(0,a.length-e[0].length));e=e[0].replace(/(^\s*\.+\s*)|(\s*$)/,""),b?(b=wipeout.template.context.buildGetter(c.addTokens(b)),this._setter=function(a,c){var d=a.asGetterArgs().slice(),g=f.apply(null,d);return d.push(c),g?(g[e]=b.apply(null,d),!0):!1}):this._setter=function(a,b){var c=f.apply(null,a.asGetterArgs());return c?(c[e]=b,!0):!1}}else this._setter=null}return this._setter},a.prototype.canSet=function(a){return!this.getParser(a)&&!!this.buildSetter()},a.prototype.getParser=function(a){return a||(this.primed(),a=this.propertyOwner),this.parser||a instanceof wipeout.base.bindable&&a.getGlobalParser(this.name)},a.prototype.set=function(a,b,c){if(!this.canSet(c))throw"You cannot set the value of: "+this.value()+".";return this.buildSetter()(a,b)},a.prototype.watch=function(a,b,c){if(this.primed(),this.getParser()||/^\s*((true)|(false)|(\d+(\.\d+)?)|(\/(?!\/)))\s*$/.test(this.value()))return void(c&&b(void 0,this.get(a)));var d=/^([\$\w\s\.]|(\[\d+\]))+$/.test(this.value())?new obsjs.observeTypes.pathObserver(a,this.value().replace(/^\s*\$model\./,"$this.model.")):a.getComputed(this.buildGetter());return this._caching.push(d),d.onValueChanged(b,c)},a.prototype.prime=function(a,b){if(this._caching)throw"prime cannot be asynchronus or nested.";try{return this._caching=[],this.propertyOwner=a,b(),this._caching}finally{delete this._caching,delete this.propertyOwner}},a.prototype.primed=function(){if(!this._caching)throw'The setter must be primed to make this call. Use the "prime(...)" function and pass in the logic to execute in a primed context.'},a}),f("wipeout.debug",function(){return{renderedItems:function(a,b){var c,e=[],f=function(a){if(a)switch(a.nodeType){case 1:d(a.childNodes,f);case 8:!(c=wipeout.utils.html.getViewModel(a))||-1!==e.indexOf(c)||b&&c.constructor!==b||e.push(c)}};return f(a||document.getElementsByTagName("body")[0]),e}}}),f("wipeout.events.eventRegistration",function(){return wipeout.base.disposable.extend(function(a,b,c){this._super(),this.callback=a,this.context=b,this.registerDisposeCallback(c)})}),f("wipeout.events.event",function(){var a=function b(){return this instanceof b?void(this._registrations=[]):new b};return a.prototype.trigger=function(a){for(var b=0,c=this._registrations.length;c>b;b++){if(a instanceof wipeout.events.routedEventArgs&&a.handled)return;this._registrations[b].callback.call(this._registrations[b].context,a)}},a.prototype.unRegister=function(a,b){b=null==b?window:b;for(var c=0;c<this._registrations.length;c++)this._registrations[c].callback===a&&this._registrations[c].context===b&&(this._registrations.splice(c,1),c--)},a.prototype.dispose=function(){this._registrations.length=0},a.prototype.register=function(a,b,c){if(!(a instanceof Function))throw"Invalid event callback";if(c&&!(c instanceof Number))throw"Invalid event priority";for(var d=this._registrations,e={priority:c||0,callback:a,context:null==b?window:b,dispose:function(){if(e){var a=d.indexOf(e);a>=0&&d.splice(a,1),e=null}}},f=0,g=this._registrations.length;g>f;f++)if(e.priority<this._registrations[f].priority){this._registrations.splice(f,0,e);break}return f===g&&this._registrations.push(e),new wipeout.events.eventRegistration(e.callback,e.context,e.dispose,e.priority)},a}),f("wipeout.events.routedEventModel",function(){var a=objjs.object.extend(function(){this._super(),this.__triggerRoutedEventOnVM=new wipeout.events.event,this.__routedEventSubscriptions=[]});return a.prototype.triggerRoutedEvent=function(a,b){this.__triggerRoutedEventOnVM.trigger({routedEvent:a,eventArgs:b})},a.prototype.routedEventTriggered=function(a,b){for(var c=0,d=this.__routedEventSubscriptions.length;d>c;c++){if(b.handled)return;this.__routedEventSubscriptions[c].routedEvent===a&&this.__routedEventSubscriptions[c].event.trigger(b)}},a.prototype.registerRoutedEvent=function(a,b,c,d){for(var e,f=0,g=this.__routedEventSubscriptions.length;g>f;f++)if(this.__routedEventSubscriptions[f].routedEvent===a){e=this.__routedEventSubscriptions[f];break}return e||(e=new wipeout.events.routedEventRegistration(a),this.__routedEventSubscriptions.push(e)),e.event.register(b,c,d)},a.prototype.unRegisterRoutedEvent=function(a,b,c){for(var d=0,e=this.__routedEventSubscriptions.length;e>d;d++)if(this.__routedEventSubscriptions[d].routedEvent===a)return this.__routedEventSubscriptions[d].event.unRegister(b,c),!0;return!1},a}),f("wipeout.htmlBindingTypes.nb",function(){return function(a,b,c){a[b.name]=b.get(c)}}),f("wipeout.htmlBindingTypes.ow",function(){return function(a,b,c){b.watch(c,function(c,d){a[b.name]=d},!0)}}),f("wipeout.htmlBindingTypes.owts",function(){return function(a,b,c){if(!b.canSet())throw'Setter "'+b.value()+'" cannot be set.';b.onPropertyChanged(function(d,e){b.set(c,e,a)},!0)}}),f("wipeout.htmlBindingTypes.setTemplateToTemplateId",function(){return function(a,b,c){a.templateId=wipeout.viewModels.contentControl.createAnonymousTemplate(b._value)}}),f("wipeout.htmlBindingTypes.templateElementSetter",function(){return function(a,b,c){a[b.name]=new b._value.constructor;var d=new obsjs.disposable(wipeout.template.engine.instance.getVmInitializer(b._value.xml).initialize(a[b.name],c));return a[b.name].dispose instanceof Function&&d.registerDisposable(a[b.name]),d}}),f("wipeout.htmlBindingTypes.templateProperty",function(){return function(a,b,c){a[b.name+"Id"]=wipeout.viewModels.contentControl.createAnonymousTemplate(b._value)}}),f("wipeout.htmlBindingTypes.tw",function(){return function(a,b,c){var d;if(b.getParser(a)||!/^([\$\w\s\.]|(\[\d+\]))+$/.test(d=b.value()))throw'Setter "'+d+'" must reference only one value when binding back to the source.';var e=obsjs.utils.obj.splitPropertyName(d);return obsjs.getObserver(c[e[0]])?(c=c[e[0]],d=obsjs.utils.obj.joinPropertyName(e.slice(1))):"$parents"===e[0]&&c.$parents&&obsjs.getObserver(c.$parents[e[1]])&&(c=c.$parents[e[1]],d=obsjs.utils.obj.joinPropertyName(e.slice(2))),obsjs.tryBind(c,d,a,b.name,!0)}}),f("wipeout.polyfills.Array",function(){var a=function(){};return a.prototype.indexOf=function(a,b){for(var c=b||0,d=this.length;d>c;c++)if(this[c]===a)return c;return-1},e(a.prototype,function(a,b){Array.prototype[b]||(Array.prototype[b]=a)}),a}),f("wipeout.polyfills.Function",function(){var a=function(){};return a.prototype.bind=function(a){var b=this;return function(){return b.apply(a,arguments)}},e(a.prototype,function(a,b){Function.prototype[b]||(Function.prototype[b]=a)}),a}),f("wipeout.profile.highlightVM",function(){var a=wipeout.base.object.extend(function(a,b){this.vm=a,this.cssClass=b,this.nodes=a.entireViewModelHtml(),wipeout.utils.obj.enumerateArr(this.nodes,function(a){a.classList&&a.classList.add(this.cssClass)},this)});return a.prototype.dispose=function(){wipeout.utils.obj.enumerateArr(this.nodes,function(a){a.classList&&a.classList.remove(this.cssClass)},this)},a}),f("wipeout.profile.highlighter",function(){function a(){this.style=document.createElement("style"),this.index=0,this.styles=["wipeout-profiler-"+a.newId(),"wipeout-profiler-"+a.newId(),"wipeout-profiler-"+a.newId(),"wipeout-profiler-"+a.newId(),"wipeout-profiler-"+a.newId()];for(var b=0,c=this.styles.length;c>b;b++)this.style.innerHTML+=" ."+this.styles[b]+" {background-color:#"+a.generateColour()+" !important; cursor: pointer !important}";document.head.appendChild(this.style),this.currentHighlighter={dispose:function(){}};var d=this;this.eventHandler=function(a){d.highlightVM(a)},window.addEventListener("mousemove",this.eventHandler,!1)}return a.newId=function(){var a=0;return function(){return++a}}(),a.generateColour=function(){var a=Math.floor((wipeout.utils.obj.random(255)+255)/2),b=Math.floor((wipeout.utils.obj.random(255)+255)/2),c=Math.floor((wipeout.utils.obj.random(255)+255)/2);return a.toString(16)+b.toString(16)+c.toString(16)},a.prototype.nextStyle=function(){return this.index>=this.styles.length-1?this.index=0:this.index++,this.styles[this.index]},a.prototype.highlightVM=function(a){var b=document.elementFromPoint(a.clientX,a.clientY);if(b!==this.currentElement){this.currentElement=b;var c=wipeout.utils.html.getViewModel(this.currentElement);if(c&&c!==this.currentHighlighter.vm){var d=this.__timeoutToken={},e=this;setTimeout(function(){e.__timeoutToken===d&&(e.currentHighlighter.dispose(),e.currentHighlighter=new wipeout.profile.highlightVM(c,e.nextStyle()))},100)}}},a.prototype.dispose=function(){this.style.parentNode&&this.style.parentNode.removeChild(this.style),delete this.__timeoutToken,window.removeEventListener("mousemove",this.eventHandler),this.currentHighlighter.dispose()},a}),f("wipeout.profile.profile",function(){return function(){}}),f("wipeout.template.context",function(){function a(a,b,c){if(a&&a.shareParentScope)throw"You cannot create a template context for a view model with a shared parent scope";this.$this=a,b?(this.$parentContext=b,this.$parent=b.$this,this.$parents=[b.$this],this.$parents.push.apply(this.$parents,b.$parents)):(this.$parentContext=null,this.$parent=null,this.$parents=[]),null!=c&&(this.$index=new obsjs.observable,this.$index.value=c)}function b(){}b.prototype=window,a.prototype=new b,a.prototype.find=function(a,b){return(this._finder||(this._finder=new wipeout.utils.find(this))).find(a,b)},a.prototype.contextFor=function(b,c){return wipeout.settings.displayWarnings&&b.shareParentScope&&null!=c&&console.warn("If an item in an array is to be rendered with shareParentScope set to true, this item will not have an $index value in it's renered context"),b&&b.shareParentScope?this:new a(b,this,c)},a.prototype.asGetterArgs=function(){return this.getterArgs||(this.getterArgs=[this,this.$this,this.$parent,this.$parents,this.$index])},a.prototype.asWatchVariables=function(){return this.watchVariables||(this.watchVariables={$context:this,$this:this.$this,$parent:this.$parent,$parents:this.$parents,$index:this.$index})},a.prototype.asEventArgs=function(a,b){var c=this.asGetterArgs().slice();return c.push(a),c.push(b),c},a.prototype.getComputed=function(a){return new obsjs.observeTypes.computed(a,null,{watchVariables:this.asWatchVariables()})},a.buildGetter=function(a){try{var b=/\$model/.test(a)?"var $model = $this ? $this.model : null;\n":"";return new Function("$context","$this","$parent","$parents","$index",b+"return "+a+";")}catch(c){throw"Invalid function logic. Function logic must contain only one line of code and must not have a 'return' statement "}};var c=/^\s*[Ll]ogic\s*:/;return a.buildEventCallback=function(a){c.test(a)?a=a.replace(c,""):/\)[\s;]*$/.test(a)||(a+="(e, element)");try{var b=/\$model/.test(a)?"var $model = $this ? $this.model : null;\n":"";return new Function("$context","$this","$parent","$parents","$index","e","element",b+a)}catch(d){throw"Invalid function logic. Function logic must contain only one line of code and must not have a 'return' statement ";

}},a}),f("wipeout.template.engine",function(){function a(){this.templates={},this.xmlIntializers=new wipeout.utils.dictionary}a.prototype.setTemplate=function(a,b){if(!a)throw"Invalid template id";return"string"==typeof b?b=wipeout.wml.wmlParser(b):2===b.nodeType&&(b=wipeout.wml.wmlParser(b.value)),this.templates[a]=new wipeout.template.rendering.compiledTemplate(b)},a.prototype.getTemplateXml=function(a,c){return a=b(a),this.compileTemplate(a,function(){c(this.templates[a].xml)}.bind(this))};var b=function(){var a;return function(b){return b||a||(a=wipeout.viewModels.contentControl.createAnonymousTemplate(""))}}();return a.prototype.compileTemplate=function(a,c){if(a=b(a),this.templates[a]instanceof wipeout.template.rendering.compiledTemplate)return c(this.templates[a]),null;if(this.templates[a]instanceof wipeout.template.loader)return this.templates[a].add(function(b){this.templates[a]instanceof wipeout.template.loader&&this.setTemplate(a,b),this.compileTemplate(a,c)}.bind(this));if(!this.templates[a]){var d;if(d=document.getElementById(a))return c(this.setTemplate(a,"script"===j(d.tagName)?d.text:d.innerHTML)),null;if(wipeout.settings.asynchronousTemplates)return this.templates[a]=new wipeout.template.loader(a),this.compileTemplate(a,c)}throw'Could not load template "'+a+'".'},a.prototype.getVmInitializer=function(a){var b;return(b=this.xmlIntializers.value(a))?b:this.xmlIntializers.add(a,new wipeout.template.initialization.compiledInitializer(a))},a.instance=new a,a}),f("wipeout.template.filters",function(){return function(){}}),f("wipeout.template.initialization.viewModelPropertyValue",function(){var a=wipeout.template.propertyValue.extend(function(a,b,c){this._super(a,b,c)});return a.prototype.onPropertyChanged=function(a,b){this.primed();var c=obsjs.tryObserve(this.propertyOwner,this.name,a);return c&&this._caching.push(c),b&&a(void 0,wipeout.utils.obj.getObject(this.name,this.propertyOwner)),!!c},a.prototype.value=function(){return this.hasOwnProperty("_valueAsString")?this._valueAsString:this._valueAsString=this._super().serializeContent()},a}),f("wipeout.template.loader",function(){function a(a){this._callbacks=[],this.templateName=a,wipeout.utils.obj.ajax({type:"GET",url:a,success:function(a){this._success=!0;var b=this._callbacks;delete this._callbacks,this.templateValue=a.responseText;for(var c=0,d=b.length;d>c;c++)b[c](this.templateValue)}.bind(this),error:function(){throw delete this._callbacks,this._success=!1,'Could not locate template "'+a+'"'}.bind(this)})}return a.prototype.add=function(a){if(this._callbacks)return this._callbacks.push(a),{cancel:function(){var b;this._callbacks&&-1!==(b=this._callbacks.indexOf(a))&&this._callbacks.splice(b,1)}.bind(this)};if(this._success)return a(this.templateValue),null;throw'Could not load template "'+this.templateName+'"'},a}),f("wipeout.template.rendering.builder",function(){function a(b){this.elements=[];var c=[];d(b.html,function(b){if("string"==typeof b)c.push(b);else{var d=a.uniqueIdGenerator();c.push(' id="'+d+'"'),this.elements.push({id:d,actions:b})}},this),this.html=c.join("")}var b="wipeout_placeholder_id_";return a.uniqueIdGenerator=function(){var a=Math.floor(1e9*Math.random());return function(){return b+ ++a}}(),a.applyToElement=function(a,b,c){var d=[];return d.push.apply(d,a.prime(b,function(){var e=wipeout.template.rendering.htmlAttributes[a.action||a.name](b,a,c);e&&e.dispose instanceof Function?d.push(e):e instanceof Function&&d.push({dispose:e})})),d},a.prototype.execute=function(b){var c=[];return d(this.elements,function(e){var f=document.getElementById(e.id);f.removeAttribute("id"),d(e.actions,function(d){c.push.apply(c,a.applyToElement(d,f,b))})},this),function(){d(c.splice(0,c.length),function(a){a.dispose()})}},a}),f("wipeout.template.rendering.compiledTemplate",function(){function a(a){this.xml=a,this.html=[],this._addedElements=[],d(a,this.addNode,this);for(var b=this.html.length-1;b>0;b--)"string"==typeof this.html[b]&&"string"==typeof this.html[b-1]&&(this.html[b-1]+=this.html.splice(b,1)[0]);delete this._addedElements}a.getPropertyFlags=function(a){var b=a.indexOf("--");return-1===b?{flags:[],name:a}:{flags:a.substr(b+2).toLowerCase().split("-"),name:a.substr(0,b)}},a.prototype.addNonElement=function(a){this.html.push(a.serialize())};var b="{{",c="}}";return a.renderParenthesis=function(a,d){b=a,c=d},a.prototype.addTextNode=function(a){for(var d=a.serialize(),e=0,f=0;-1!==(f=d.indexOf(b,e));){if(this.html.push(d.substring(e,f)),e=f+b.length,-1===(f=d.indexOf(c,e)))throw"TODE";this.html.push("<script"),this.html.push([new wipeout.template.rendering.htmlPropertyValue("wo-render",d.substring(e,f))]),this.html.push(' type="placeholder"></script>'),e=f+b.length}this.html.push(d.substr(e))},a.prototype.addViewModel=function(a){this.html.push("<script"),this.html.push([new wipeout.template.rendering.htmlPropertyValue("wipeoutCreateViewModel",a)]),this.html.push(' type="placeholder"></script>')},a.getAttributeName=function(a){if(wipeout.template.rendering.htmlAttributes[a])return a;for(var b in wipeout.template.rendering.dynamicHtmlAttributes)if(wipeout.template.rendering.dynamicHtmlAttributes[b].test(a))return b},a.prototype.addAttributes=function(b){var c,d;e(b,function(b,e){var f=a.getPropertyFlags(e);if(e=f.name,f=f.flags,d=!1,d=a.getAttributeName(e)){c||this.html.push(c=[]);for(var g,h=0,i=f.length;i>h;h++)if(wipeout.template.initialization.parsers[f[h]]){if(g)throw"The parser has already been set for this element";g=f[h]}d!==e?c.push(new wipeout.template.rendering.htmlPropertyValue(e,b.value,g,d)):"id"===e?c.splice(0,0,new wipeout.template.rendering.htmlPropertyValue(e,b.value,g)):c.push(new wipeout.template.rendering.htmlPropertyValue(e,b.value,g))}else this.html.push(" "+e+b.serializeValue())},this)},a.prototype.addElement=function(a){this.html.push("<"+a.name),this.addAttributes(a.attributes),a.inline?this.html.push(" />"):(this.html.push(">"),d(a,function(a){this.addNode(a)},this),this.html.push("</"+a.name+">"))},a.prototype.addNode=function(a){if(-1!==this._addedElements.indexOf(a))throw"Infinite loop";this._addedElements.push(a),3===a.nodeType?this.addTextNode(a):1!==a.nodeType?this.addNonElement(a):wipeout.utils.viewModels.getViewModelConstructor(a)?this.addViewModel(a):this.addElement(a)},a.prototype.quickBuild=function(a,b){var c=this._builder||(this._builder=this.getBuilder());return a(c.html),c.execute(b)},a.prototype.getBuilder=function(){return new wipeout.template.rendering.builder(this)},a}),g("attr",function(){function a(a,c,d){if(b(c.name)){var e=c.name.substr(c.name.indexOf("attr-")+5);c.watch(d,function(b,c){a.getAttribute(e)!==c&&a.setAttribute(e,c)},!0)}}var b=a.test=function(a){return/^\s*(data\-)?wo\-attr\-./.test(a)};return a}),g("class",function(){function a(a,b,c){var d,h=b.name.substr(b.name.indexOf("class-")+6);!(d=e(a,h))&&b.get(c)?f(a,h):d&&!b.get(c)&&g(a,h),b.watch(c,function(b,c){!b&&c?f(a,h):b&&!c&&g(a,h)},!1)}function b(b,d,e){if(c(d.name)){if(wipeout.settings.useElementClassName||!b.classList)return a(b,d,e);var f=d.name.substr(d.name.indexOf("class-")+6);d.get(e)?b.classList.add(f):b.classList.remove(f),d.watch(e,function(a,c){c?b.classList.add(f):b.classList.remove(f)},!1)}}var c=b.test=function(a){return/^\s*(data\-)?wo\-class\-./.test(a)},d=function(a){return new RegExp("(?:^|\\s)"+a+"(?!\\S)","g")},e=function(a,b){return d(b).test(a.className)},f=function(a,b){e(a,b)||(a.className=i(a.className+(a.className.length?" ":"")+b))},g=function(a,b){var c;(c=d(b)).test(a.className)&&(a.className=i(a.className.replace(c,"")))};return b}),g("content",function(){return function(a,b,c){b.watch(c,function(b,c){a.innerHTML=null==c?"":c},!0)}}),g("data",function(){return function(a,b,c){b.setData(a,"wo-data",b)}}),g("event",function(){function a(a,c,d){b(c.name)&&c.onElementEvent(c.name.substr(c.name.indexOf("event-")+6),d)}var b=a.test=function(a){return/^\s*(data\-)?wo\-event\-./.test(a)};return a}),d(["blur","change","click","focus","keydown","keypress","keyup","mousedown","mouseout","mouseover","mouseup","submit"],function(a){g(a,function(){return function(b,c,d){c.onElementEvent(a,d)}})}),f("wipeout.template.rendering.htmlAttributes.id",function(){return function(a,b,c){var d=b.value();return c.$this instanceof wipeout.viewModels.view&&(c.$this.templateItems[d]=a),a.id=d,function(){c.$this instanceof wipeout.viewModels.view&&c.$this.templateItems[d]===a&&delete c.$this.templateItems[d]}}}),g("on-event",function(){return function(a,b,c){b.setData(a,"wo-on-event",b.value())}}),g("render",function(){return function(a,b,c){var d=new wipeout.template.rendering.renderedContent(a,b.value(),c);return b.watch(c,function(a,b){d.render(b)},!0),d.dispose.bind(d)}}),g("style",function(){function a(a,c,d){if(b(c.name)){var e=c.name.substr(c.name.indexOf("style-")+6);c.watch(d,function(b,c){a.style[e]!=c&&(a.style[e]=c)},!0)}}var b=a.test=function(a){return/^\s*(data\-)?wo\-style\-./.test(a)};return a}),g("value",function(){function a(a,b,d){var e=b.value();if(!b.canSet())throw'Cannot bind to the property "'+e+'".';b.watch(d,function(e,f){f===c(a,b,d)?a.setAttribute("checked","checked"):a.removeAttribute("checked")},!0),b.onElementEvent("change",d,function(){b.set(d,c(a,b,d),a)})}function b(a,b,c){var d;return(d=b.getData(a,"wo-data"))?d.get(c,a):null!=(d=a.getAttribute("value"))?d:e}function c(a,c,d){var f=b(a,c,d);if(f===e)throw'Radio buttons with the "wo-value" attribute must have a "value" or "wo-data" attribute.';return f}function d(a,c,d){var f=c.value();if(!c.canSet())throw'Cannot bind to the property "'+f+'".';var g;(g=b(a,c,d))!==e&&c.set(d,g,a),c.watch(d,function(b,c){c||""===c?a.setAttribute("checked","checked"):a.removeAttribute("checked")},!0),c.onElementEvent("change",d,function(){g=b(a,c,d),null!=a.getAttribute("checked")?g===e&&(g=!0):g=g===e?!1:null,c.set(d,g,a)})}var e={};return function(b,c,e){if("checkbox"===b.type)return d(b,c,e);if("radio"===b.type)return a(b,c,e);var f=c.value();if(!c.canSet())throw'Cannot bind to the property "'+f+'".';var g="textarea"===j(b.tagName);c.watch(e,function(a,c){g&&b.innerHTML!==c?b.innerHTML=c:g||b.value===c||(b.value=c)},!0),c.onElementEvent(c.getData(b,"wo-on-event")||"change",e,function(){c.set(e,g?b.innerHTML:b.value,b)})}}),g("visible",function(){return function(a,b,c){a.style.display=b.get(c)?"":"none",b.watch(c,function(b,c){c&&!b?a.style.display="":!c&&b&&(a.style.display="none")},!1)}}),f("wipeout.template.rendering.htmlAttributes.wipeoutCreateViewModel",function(){return function(a,b,c){var d=new wipeout.template.rendering.viewModelElement(a,b.value(),c);return function(){d.dispose(!0)}}}),f("wipeout.template.rendering.htmlPropertyValue",function(){var a=wipeout.template.propertyValue.extend(function(a,b,c,d){this._super(a,b,c),this.action=d});return a.prototype.eventBuild=function(){return this._eventBuilt||(this._eventBuilt=wipeout.template.context.buildEventCallback(this.value()))},a.prototype.onElementEvent=function(a,b,c,d){this.primed();var e=this.propertyOwner;c=c||function(a){this.eventBuild().apply(null,b.asEventArgs(a,e))}.bind(this),e.addEventListener(a,c,d||!1);var f=new obsjs.disposable(function(){e.removeEventListener(a,c,d||!1),c=null});return this._caching.push(f),f.dispose.bind(f)},a.prototype.setData=function(a,b,c){return this.primed(),this._caching.push({dispose:function(){wipeout.utils.domData.clear(a,b)}}),wipeout.utils.domData.set(a,b,c)},a.prototype.getData=function(a,b){return wipeout.utils.domData.get(a,b)},a.prototype.dataExists=function(a,b){return wipeout.utils.domData.exists(a,b)},a}),f("wipeout.template.rendering.renderedArray",function(){var a=obsjs.disposable.extend(function(a,b){if(this._super(),this.parent=b,this.array=a,this.parent.parentRenderContext&&this.parent.parentRenderContext.$this instanceof wipeout.viewModels.itemsControl&&a===this.parent.parentRenderContext.$this.items&&(this.itemsControl=this.parent.parentRenderContext.$this),this.children=[],this.itemsControl){if(this.itemsControl.$getChild)throw"These items are being rendered already.";this.itemsControl.$getChild=function(a){if(0===arguments.length){for(var b=this.children.slice(),a=0,c=b.length;c>a;a++)b[a]=b[a].renderedChild;return b}return this.children[a]?this.children[a].renderedChild:void 0}.bind(this)}});a.prototype.remove=function(a){this.itemsControl&&this.itemsControl.onItemRemoved(a.renderedChild),delete a.renderedChild,delete a.forItem,a.dispose()};var b={};return a.prototype.render=function(a){var c=[];d(a,function(a){if("splice"===a.type){for(var d=new Array(a.addedCount),e=0;e<a.addedCount;e++)d[e]=b;d.splice(0,0,a.index,a.removed.length),c.push.apply(c,this.children.slice(a.index,a.index+a.removed.length)),this.children.splice.apply(this.children,d)}else isNaN(parseInt(a.name))||(this.children[a.name]!==b&&c.push(this.children[a.name]),this.children[a.name]=b)},this);for(var e=c.length-1;e>=0;e--)c[e]===b&&c.splice(1,e);for(var f=0,g=this.children.length;g>f;f++)if(this.children[f]===b){for(var e=0,h=c.length;h>e;e++)if(c[e].forItem===this.array[f]){var i=c.splice(e,1)[0];0===f?this.parent.prepend(i):this.children[f-1].insertAfter(i),i.renderContext.$index.value=f,i.rename("item: "+f),this.children[f]=i;break}if(e==h){var j=document.createElement("script");0===f?this.parent.prepend(j):this.children[f-1].insertAfter(j),this.children[f]=new wipeout.template.rendering.renderedContent(j,"item: "+f,this.parent.parentRenderContext);var k=this.itemsControl?this.itemsControl._createItem(this.array[f]):this.array[f];this.children[f].render(k,f),this.children[f].forItem=this.array[f],this.itemsControl&&(this.children[f].renderedChild=k,this.itemsControl.onItemRendered(k))}}d(c,this.remove,this)},a.prototype.dispose=function(){this._super(),d(this.children,this.remove,this),this.children.length=0,this.itemsControl&&(delete this.itemsControl.$getChild,delete this.itemsControl),delete this.array},a}),function(){function a(a){try{return a instanceof b?a.detatch():a instanceof Array?a:[a]}finally{a instanceof b&&delete a.detatched}}var b=wipeout.template.rendering.renderedContent;b.prototype.prepend=function(b){b=a(b),b.push(this.openingTag.nextSibling||this.closingTag);for(var c=b.length-2;c>=0;c--)b[c+1].parentNode.insertBefore(b[c],b[c+1])},b.prototype.insertBefore=function(b){d(a(b),function(a){this.parentNode.insertBefore(a,this)},this.openingTag)},b.prototype.insertAfter=function(b){b=a(b),this.closingTag.nextSibling?this.closingTag.parentNode.insertBefore(b[b.length-1],this.closingTag.nextSibling):this.closingTag.parentNode.appendChild(b[b.length-1]);for(var c=b.length-2;c>=0;c--)b[c+1].parentNode.insertBefore(b[c],b[c+1])},b.prototype.detatch=function(){if(!this.detatched){var a=this.openingTag;this.detatched=[this.openingTag];for(var b=0;a&&a!==this.closingTag;b++)this.detatched.push(a=a.nextSibling),this.detatched[b].parentNode.removeChild(this.detatched[b])}return this.detatched.slice()},b.prototype.allHtml=function(){if(this.detatched)return this.detatch();for(var a=[this.openingTag],b=this.openingTag;b&&b!==this.closingTag;)a.push(b=b.nextSibling);return a}}(),f("wipeout.template.rendering.viewModelElement",function(){function a(){throw"A view model element can only be rendered once"}var b=wipeout.template.rendering.renderedContent.extend(function(b,c,d){var e=wipeout.utils.viewModels.getViewModelConstructor(c?c:b);if(!e)throw"Invalid view model";this._super(b,wipeout.utils.obj.trim(e.name),d),this.createdViewModel=new e.constructor,this.renderContext=d?d.contextFor(this.createdViewModel):new wipeout.template.context(this.createdViewModel),this.disposeOfViewModelBindings=wipeout.template.engine.instance.getVmInitializer(c||wipeout.wml.wmlParser(b)).initialize(this.createdViewModel,this.renderContext),this.createdViewModel instanceof wipeout.viewModels.view&&this.createdViewModel.onInitialized(),this.render(this.createdViewModel),this.render=a});return b.prototype.dispose=function(a){this._super(a),this.disposeOfViewModelBindings(),this.createdViewModel instanceof obsjs.disposable?this.createdViewModel.dispose():obsjs.dispose(this.createdViewModel),delete this.createdViewModel},b}),f("wipeout.utils.domData",function(){function a(){}var b="__wipeout_domData";return a.exists=function(a,c){return a[b]&&a[b].hasOwnProperty(c)},a.get=function(c,d){return arguments.length<2?c[b]:a.exists(c,d)?c[b][d]:void 0},a.set=function(a,c,d){return(a[b]||(a[b]={}))[c]=d},a.clear=function(a,c){if(c&&a[b])for(var d in a[b])if(d!==c)return void delete a[b][c];delete a[b]},a}),f("wipeout.utils.find",function(){var a=wipeout.base.object.extend(function(a){this._super(),this.renderContext=a});return a.prototype.find=function(a,b){var c={};if(b)for(var d in b)c[d]=b[d];if(b=c,b.$number||(b.$number=0),a&&a.constructor===Function)b.$instanceOf=a;else if(a&&a.constructor!==String)for(var d in a)b[d]=a[d];else b.$ancestry=wipeout.utils.obj.trim(a);!b.$number&&b.$n&&(b.$number=b.$n),!b.$instanceOf&&b.$i&&(b.$instanceOf=b.$i),!b.$instanceOf&&b.$instanceof&&(b.$instanceOf=b.$instanceof),!b.$ancestry&&b.$a&&(b.$ancestry=b.$a),!b.$type&&b.$t&&(b.$type=b.$t);var e=b.$m||b.$model;return delete b.$m,delete b.$model,delete b.$n,delete b.$instanceof,delete b.$i,delete b.$a,delete b.$t,this._find(b,e)},a.prototype._find=function(a,b){if(!this.renderContext||!this.renderContext.$parentContext)return null;for(var c,d=b?function(a){return a&&a.$this instanceof wo.view?a.$this.model:null}:function(a){return a?a.$this:null},e=this.renderContext,f=a.$number;f>=0&&e;f--){var g=0;for(e=e.$parentContext;!wipeout.utils.find.is(c=d(e),a,g)&&e;)e=e.$parentContext,g++}return c},a.create=function(a){var b=new wipeout.utils.find(a);return function(a,c){return b.find(a,c)}},a.regex={ancestors:/^(great)*(grand){0,1}parent$/,great:/great/g,grand:/grand/g},a.$type=function(a,b,c){return a&&a.constructor===b},a.$ancestry=function(a,b,c){if(b=(b||"").toLowerCase(),-1!==b.indexOf("greatparent"))return!1;var d=0,e=b.match(wipeout.utils.find.regex.great);return e&&(d+=e.length),e=b.match(wipeout.utils.find.regex.grand),e&&(d+=e.length),d===c},a.$instanceOf=function(a,b,c){return a&&b&&b.constructor===Function?a instanceof b:!1},a.is=function(a,b,c){if(!a)return!1;for(var d in b)if("$number"!==d)if("$"===d[0]){if(!wipeout.utils.find[d](a,b[d],c))return!1}else if(b[d]!==a[d])return!1;return!0},a}),f("wipeout.utils.html",function(){function a(){}var b=function(a){return a?a.wipeoutOpening?a.wipeoutOpening.viewModel:a.wipeoutClosing?a.wipeoutClosing.viewModel:b(wipeout.template.rendering.renderedContent.getParentElement(a)):null},c=function(a){var b=document.createElement("span");return b.innerHTML="Loading template",b};return a.createTemplatePlaceholder=c,a.getViewModel=b,a}),f("wipeout.utils.jsParse",function(){function a(a,b,c){if(c)return!1;for(var d=0;"\\"===a[b-1-d];)d++;return d%2!=0}function b(a,b){a instanceof Function&&(a=a.toString());for(var c,d=[{end:0}],e=0;c=b.getFirst(a,e);)e=c.token.close.lastIndex,d.push(c);d.push({end:a.length});for(var c,g=[],h=new i,e=1,j=d.length;j>e;e++)g.push(a.substring(d[e-1].end,d[e].begin)),d[e].token&&d[e].token.tokenize&&(h[c=f()]=a.substring(d[e].begin,d[e].end),g.push(c));return h.output=g.join(""),h}function c(){}var d=[{open:/'/gm,close:/'/gm,tokenize:!0,isEscaped:a},{open:/"/gm,close:/"/gm,tokenize:!0,isEscaped:a},{open:/\/\//gm,close:/(?=\r?\n)/gm,tokenize:!1},{open:/\/\*/gm,close:/\*\//gm,tokenize:!1}],e=[{open:/\{/gm,close:/\}/gm,tokenize:!0,nested:!0},{open:/\(/gm,close:/\)/gm,tokenize:!0,nested:!0},{open:/\[/gm,close:/\]/gm,tokenize:!0,nested:!0}];e.getFirst=d.getFirst=function(a,b){for(var c,d,e,f=0,g=this.length;g>f;f++)this[f].open.lastIndex=b,c=this[f].open.exec(a),c&&(!d||c.index<d.index)&&(d=c,e=this[f]);if(d){var h,i,j=1;do{for(e.close.lastIndex=e.open.lastIndex;e.nested&&(h=e.open.exec(a))&&e.isEscaped&&e.isEscaped(a,h.index,!0););for(;(i=e.close.exec(a))&&e.isEscaped&&e.isEscaped(a,i.index,!1););if(!i)throw"Invalid function string: "+a;h&&h.index<i.index?j++:(e.open.lastIndex=e.close.lastIndex,j--)}while(e.nested&&j>0);return{token:e,begin:d.index,end:e.close.lastIndex}}};var f=function(){var a=0;return function(){return"##token"+ ++a+"##"}}(),g=function(a){return b(a,d)},h=function(a){var c=g(a),d=b(c.output,e);for(var f in d)d.hasOwnProperty(f)&&"output"!==f&&(d[f]=c.addTokens(d[f]));for(var f in c)"output"!==f&&(d[f]=c[f]);return d},i=function(){};return i.prototype.addTokens=function(a){for(var b in this)this.hasOwnProperty(b)&&"output"!==b&&(a=a.replace(b,this[b]));return a},c.removeCommentsTokenStrings=g,c.removeCommentsTokenStringsAndBrackets=h,c}),f("wipeout.utils.viewModels",function(){function a(){}var b="data-wo-element-name";return a.getElementName=function(a){var c;if(a.getAttribute&&null!=(c=a.getAttribute(b)))return c;var d=l(j(a instanceof Element?a.localName:a.name));return/^js[A-Z]/.test(d)?d.substr(2):d},a.getViewModelConstructor=function(b){var c,d=a.getElementName(b);return(c=wipeout.utils.obj.getObject(d))?{name:d,constructor:c}:void 0},a}),f("wipeout.viewModels.contentControl",function(){function a(a,b,c){this.currentTemplate=a[c],this.currentTemplateId=a[b],this.owner=a,this.templateIdProperty=b,this.templateProperty=c,this.refreshTemplate(this.currentTemplateId),this.d1=a.observe(b,this.onTemplateIdChange,this),this.d2=a.observe(c,this.onTemplateChange,this)}var b=wipeout.viewModels.view.extend(function(a,b){this._super(a,b),wipeout.viewModels.contentControl.createTemplatePropertyFor(this,"templateId","setTemplate")});return b.addGlobalParser("setTemplate","template"),b.addGlobalBindingType("setTemplate","setTemplateToTemplateId"),b.createTemplatePropertyFor=function(b,c,d){return new a(b,c,d)},b.createAnonymousTemplate=function(){function a(){return c+"-"+ ++b}var b=Math.floor(1e9*Math.random()),c="WipeoutAnonymousTemplate",d={};return function(b){if("string"==typeof b){if(!d[b]){var e=a();wipeout.template.engine.instance.setTemplate(e,b),d[b]=e}return d[b]}if(!b[c]){var e=a();wipeout.template.engine.instance.setTemplate(e,b),b[c]=e}return b[c]}}(),a.prototype.dispose=function(){this.d1.dispose(),this.d2.dispose()},a.prototype.refreshTemplate=function(a){this.pendingLoad=wipeout.template.engine.instance.getTemplateXml(a,function(a){delete this.pendingLoad,this.currentTemplate=this.owner[this.templateProperty]=a}.bind(this))},a.prototype.onTemplateIdChange=function(a,b){return b===this.currentTemplateId?void(this.currentTemplateId=null):(this.currentTemplateId=null,this.pendingLoad&&this.pendingLoad.cancel(),void this.refreshTemplate(b))},a.prototype.onTemplateChange=function(a,b){return b===this.currentTemplate?void(this.currentTemplate=null):(this.currentTemplate=null,void(this.currentTemplateId=this.owner[this.templateIdProperty]=wipeout.viewModels.contentControl.createAnonymousTemplate(b)))},b}),f("wipeout.viewModels.if",function(){var a=!0,b=function(){a&&(a=!1,c.blankTemplateId=wipeout.viewModels.contentControl.createAnonymousTemplate("",!0))},c=wipeout.viewModels.contentControl.extend(function d(a,c){b(),this._super(a,c),this.shareParentScope=!0,this.condition=!1,this.elseTemplateId=d.blankTemplateId,this.observe("elseTemplateId",this.elseTemplateChanged,this),this.elseTemplate="",wipeout.viewModels.contentControl.createTemplatePropertyFor(this,"elseTemplateId","elseTemplate"),this.__cachedTemplateId=this.templateId,this.observe("condition",this.onConditionChanged,this),this.observe("templateId",this.copyTemplateId,this),this.copyTemplateId(null,this.templateId)});return c.addGlobalParser("elseTemplate","template"),c.addGlobalBindingType("elseTemplate","templateProperty"),c.prototype.elseTemplateChanged=function(a,b){this.condition||this.synchronusTemplateChange(b)},c.prototype.onConditionChanged=function(a,b){this.__oldConditionVal&&!b?this.synchronusTemplateChange(this.elseTemplateId):!this.__oldConditionVal&&b&&this.synchronusTemplateChange(this.__cachedTemplateId),this.__oldConditionVal=!!b},c.prototype.copyTemplateId=function(a,b){b!==this.elseTemplateId&&(this.__cachedTemplateId=b),this.condition||b===this.elseTemplateId||(this.templateId=this.elseTemplateId)},c}),f("wipeout.viewModels.itemsControl",function(){var a,b,c=wipeout.viewModels.contentControl.extend(function e(b,c,f){this._super(b||a||(a=wipeout.viewModels.contentControl.createAnonymousTemplate("{{$this.items}}")),f),this.itemTemplateId=c,this.itemTemplate="",wipeout.viewModels.contentControl.createTemplatePropertyFor(this,"itemTemplateId","itemTemplate"),this.items=new wipeout.base.array,this.registerDisposable(this.items),this.registerRoutedEvent(e.removeItem,this._removeItem,this),this.observe("itemTemplateId",function(a,b){d(this.getItemViewModels(),function(a){a.__createdByItemsControl&&(a.templateId=b)})},this)});return c.addGlobalParser("itemTemplate","template"),c.addGlobalBindingType("itemTemplate","templateProperty"),c.removeItem=wipeout.events.routedEvent(),c.prototype._removeItem=function(a){-1!==this.items.indexOf(a.data)&&(this.removeItem(a.data),a.handled=!0)},c.prototype.getItemViewModels=function(){return this.$getChild?this.$getChild():[]},c.prototype.getItemViewModel=function(a){return this.$getChild?this.$getChild(a):void 0},c.prototype.removeItem=function(a){this.items.remove(a)},c.prototype.onItemRendered=function(a){},c.prototype.onItemRemoved=function(a){a.dispose()},c.prototype._createItem=function(a){var b=this.createItem(a);return b},c.prototype.createItem=function(a){var c=new wipeout.viewModels.view(this.itemTemplateId||b||(b=wipeout.viewModels.contentControl.createAnonymousTemplate("{{$this.model}}")),a);return c.__createdByItemsControl=!0,c},c}),function(){var a=wipeout.viewModels.view;a.prototype.unRegisterRoutedEvent=function(a,b,c){for(var d=0,e=this.$routedEventSubscriptions.length;e>d;d++)if(this.$routedEventSubscriptions[d].routedEvent===a)return this.$routedEventSubscriptions[d].event.unRegister(b,c),!0;return!1},a.prototype.registerRoutedEvent=function(a,b,c,d){for(var e,f=0,g=this.$routedEventSubscriptions.length;g>f;f++)if(this.$routedEventSubscriptions[f].routedEvent===a){e=this.$routedEventSubscriptions[f];break}return e||(e=new wipeout.events.routedEventRegistration(a),this.$routedEventSubscriptions.push(e)),e.event.register(b,c,d)},a.prototype.triggerRoutedEvent=function(a,b){b instanceof wipeout.events.routedEventArgs||(b=new wipeout.events.routedEventArgs(b,this));for(var c=0,d=this.$routedEventSubscriptions.length;d>c;c++){if(b.handled)return;this.$routedEventSubscriptions[c].routedEvent===a&&this.$routedEventSubscriptions[c].event.trigger(b)}if(!b.handled&&(this.model instanceof wipeout.events.routedEventModel&&this.model.routedEventTriggered(a,b),!b.handled)){var e=this.getParent();e&&e.triggerRoutedEvent(a,b)}}}();var n=function(){if(this._parentElement){for(var a in this._parentElement)if(this._parentElement[a]===this)return this._parentElement;delete this._parentElement}return null};f("wipeout.wml.wmlElementBase",function(){var a=wipeout.base.object.extend(function(){this._super(),this.length=0});return a.extend=wipeout.base.object.extend,a.prototype._super=wipeout.base.object.prototype._super,a.prototype.push=function(a){if(a.getParentElement!==n)throw"Invalid template node";if(a.getParentElement())throw"This node already has a parent element";return this[this.length]=a,this.length++,a._parentElement=this,this.length},a.prototype.splice=function(){throw"not implemented"},a.prototype.serializeContent=function(){var a=[];return wipeout.utils.obj.enumerateArr(this,function(b){a.push(b.serialize())}),a.join("")},a}),f("wipeout.wml.wmlElement",function(){var a=wipeout.wml.wmlElementBase.extend(function(a,b){this._super(),this.name=a,this.attributes={},this.inline=!!b,this.nodeType=1});return a.prototype.getParentElement=n,a.prototype.getAttribute=function(a){return this.attributes[a]?this.attributes[a].value:null},a.prototype.serialize=function(){var a=[];a.splice(0,0,"<",this.name);var b=2;for(var c in this.attributes)a.splice(b,0," ",c,this.attributes[c].serializeValue()),b+=3;var d=this.serializeContent();return!d.length&&this.inline?a.push(" />"):(a.push(">"),a.push(d),a.push("</"+this.name+">")),a.join("")},a}),f("wipeout.wml.wmlAttribute",function(){function a(a){this.value=a,this.nodeType=2}return a.prototype.serializeValue=function(){return'="'+this.value.replace(/&/g,"&amp;").replace(/"/g,"&quot;")+'"'},a.prototype.serializeContent=function(){return this.value},a}),f("wipeout.wml.wmlComment",function(){var a=function(a){this.commentText=a,this.nodeType=8};return a.prototype.serialize=function(){return"<!--"+this.commentText+"-->"},a.prototype.getParentElement=n,a}),f("wipeout.wml.wmlString",function(){var a=function(a){this.text=a,this.nodeType=3};return a.prototype.serialize=function(){return this.text},a.prototype.getParentElement=n,a}),f("wipeout.wml.wmlParser",function(){function a(b){for(var c,d=new wipeout.wml.wmlElement(b.localName,-1!==e.indexOf(b.localName)),f=0,g=b.childNodes.length;g>f;f++)1===b.childNodes[f].nodeType?d.push(a(b.childNodes[f])):8===b.childNodes[f].nodeType?d.push(new wipeout.wml.wmlComment(b.childNodes[f].textContent)):3===b.childNodes[f].nodeType?d.push(new wipeout.wml.wmlString(b.childNodes[f].textContent)):(c=document.createElement("div"),c.appendChild(b.childNodes[f]),d.push(new wipeout.wml.wmlString(c.innerHTML)));for(var f=0,g=b.attributes.length;g>f;f++)d.attributes[b.attributes[f].name]=new wipeout.wml.wmlAttribute(b.attributes[f].value);return d}function b(c){if(c instanceof Element)return a(c);var d=b.addToElement(c);if(!d)throw"Cannot create a template for the following string: "+c;return a(d)}b.specialTags={area:"map",base:"head",basefont:"head",body:"html",caption:"table",col:"colgroup",colgroup:"table",command:"menu",frame:"frameset",frameset:"html",head:"html",keygen:"form",li:"ul",optgroup:"select",option:"select",rp:"rt",rt:"ruby",source:"audio",tbody:"table",td:"tr",tfoot:"table",th:"tr",thead:"table",tr:"tbody"},b.cannotCreateTags={html:!0,basefont:!0,base:!0,body:!0,frame:!0,frameset:!0,head:!0},b.ieReadonlyElements={audio:!0,col:!0,colgroup:!0,frameset:!0,head:!0,rp:!0,rt:!0,ruby:!0,select:!0,style:!0,table:!0,tbody:!0,tfooy:!0,thead:!0,title:!0,tr:!0},b.getFirstTagName=function(a){var b=/^\s*<\s*[a-z\-\.0-9\$]+(\s|>|\/)/.exec(a.replace(/<\!--[^>]*-->/g,"").replace(/^\s*/,""));return b?i(b[0].substr(1,b[0].length-2)):null};var c=document.createElement("table");c.innerHTML="<tbody></tbody>";var d=!c.childNodes.length;b.addToElement=function(a){var c=b.getFirstTagName(a);if(!c){var e=document.createElement("div");return e.innerHTML=a,e}if(b.cannotCreateTags[c])throw'Cannot create an instance of the "'+c+'" tag.';var f=b.specialTags[c]||"div";if(d&&b.ieReadonlyElements[f]){for(var g=b.createElement("<"+f+">"+a+"</"+f+">"),h=0,i=g.childNodes.length;i>h;h++){var k=g.childNodes[h];if(1===k.nodeType&&j(k.tagName)===f)return k}return document.createElement(f)}var e=document.createElement(f);return e.innerHTML=a,e};var e=["area","base","br","col","command","hr","img","input","keygen","link","meta","param","source"];return b}),window.wo=function(a,b){var c=new obsjs.disposable;if(arguments.length<2?b=document.getElementsByTagName("body")[0]:"string"==typeof b&&(b=document.getElementById(b)),wipeout.utils.viewModels.getViewModelConstructor(b)){var e=new wipeout.template.rendering.viewModelElement(b);null!=a&&(e.createdViewModel.model=a),c.registerDisposable(e)}else d(wipeout.utils.obj.copyArray(b.getElementsByTagName("*")),function(d){if(b.contains(d)&&wipeout.utils.viewModels.getViewModelConstructor(d)){var e=new wipeout.template.rendering.viewModelElement(d);null!=a&&(e.createdViewModel.model=a),c.registerDisposable(e)}});return c},window.addEventListener("load",function(){window.wo()}),b("viewModel",a),b("routedEvent",wipeout.events.routedEvent),b("array",wipeout.base.array),b("observable",obsjs.observable),b("bindings",wipeout.htmlBindingTypes),b("parsers",wipeout.template.initialization.parsers),b("filters",wipeout.template.filters),
b("addHtmlAttribute",g),e(wipeout.viewModels,function(a,c){b(c,a)})}();