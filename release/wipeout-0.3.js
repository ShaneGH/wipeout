(function(){var k={};var e=function(n,l,m){m=m||window;if(n==null){return}if(n instanceof Array||n instanceof HTMLCollection||n instanceof NodeList||(window.NamedNodeMap&&n instanceof NamedNodeMap)||(window.MozNamedAttrMap&&n instanceof MozNamedAttrMap)){for(var o=0,p=n.length;o<p;o++){l.call(m,n[o],o)}}else{for(var o in n){l.call(m,n[o],o)}}};var f=function(n,l,m){m=m||window;if(n==null){return}if(n instanceof Array||n instanceof HTMLCollection||n instanceof NodeList||(window.NamedNodeMap&&n instanceof NamedNodeMap)||(window.MozNamedAttrMap&&n instanceof MozNamedAttrMap)){for(var o=n.length-1;o>=0;o--){l.call(m,n[o],o)}}else{var p=[];for(var o in n){p.push(o)}for(var o=p.length-1;o>=0;o--){l.call(m,n[p[o]],p[o])}}};var b=function(n,m,l){var o=c("wipeout.bindings."+n,l);ko.bindingHandlers[n]={init:o.init,update:o.update};if(m){ko.virtualElements.allowedBindings[n]=true}};var c=function(m,l){m=m.split(".");var n=m.splice(0,m.length-1);var o={};o[m[m.length-1]]=l();g(n.join("."),o);return o[m[m.length-1]]};var g=function(n,m){n=n.split(".");if(n[0]!=="wipeout"){throw'Root must be "wipeout".'}n.splice(0,1);var l=k;e(n,function(o){l=l[o]||(l[o]={})});if(m&&m instanceof Function){m=m()}e(m,function(p,o){l[o]=p})};var a=/^\s+|\s+$/g;var i=function(l){return l?l.replace(a,""):l};var j=function(l){return l?i(l).toLowerCase():l};var h=function(l){if(l==null){return false}l=j(l);return !!(l&&l!=="false"&&l!=="0")};c("wipeout.utils.obj",function(){var n=function(r,s){if(!s){s=window}var q=r.split(".");for(var t=0,u=q.length;t<u;t++){s=s[q[t]];if(s==null){return null}}return s};var m=function(r,s){var q=n(r,s);if(q instanceof Function){var t=new q();if(t instanceof k.base.view&&d){t.__woBag.constructedViewType=r}return t}throw r+" is not a valid function."};var l=function(s){var t=[];for(var q=0,r=s.length;q<r;q++){t.push(s[q])}return t};var p=function(q){return Math.floor(Math.random()*q)};var o=function(){};o.parseBool=h;o.trimToLower=j;o.trim=i;o.enumerate=e;o.enumerateDesc=f;o.getObject=n;o.createObject=m;o.copyArray=l;o.random=p;return o});c("wipeout.base.object",function(){var m=function(){};var l={parents:[],children:[]};m.clearVirtualCache=function(o){if(!o){l.parents.length=0;l.children.length=0;return}for(var p=0,q=l.children.length;p<q;p++){if(l.children[p]===o||l.parents[p]===o){l.children.splice(p,1);l.parents.splice(p,1)}}};m.useVirtualCache=true;m.prototype._super=function(){var q=arguments.callee.caller;var o=null;if(m.useVirtualCache){var w=l.children.indexOf(q);if(w!==-1){o=l.parents[w]}}if(!o){var t=[];var p=this.constructor.prototype;while(p){t.push(p);p=Object.getPrototypeOf(p)}t.reverse();for(var r=0,s=t.length;r<s;r++){if(t[r]===q.prototype){o=t[r-1].constructor}else{for(var v in t[r]){if(t[r][v]===q){for(var u=r-1;u>=0;u--){if(t[u][v]!==q){o=t[u][v];break}}}if(o){break}}}if(o){if(m.useVirtualCache){l.children.push(q);l.parents.push(o)}break}}if(!o){throw"Could not find method in parent class"}}return o.apply(this,arguments)};var n=/^[a-zA-Z_][a-zA-Z_0-9]*$/;m.extend=function(o,q){for(var r in this){if(this.hasOwnProperty(r)&&this[r]&&this[r].constructor===Function&&this[r]!==m.clearVirtualCache){o[r]=this[r]}}if(q&&d){if(!n.test(q)){throw"Invalid class name. The class name is for debug purposes and can contain alphanumeric characters only"}new Function("childClass","parentClass","            function "+q+"() { this.constructor = childClass; }            "+q+".prototype = parentClass.prototype;            childClass.prototype = new "+q+"();")(o,this)}else{var s=function(){this.constructor=o};s.prototype=this.prototype;o.prototype=new s()}return o};return m});c("wipeout.base.disposable",function(){var l=k.base.object.extend(function(m){this._super();this.disposeFunction=m});l.prototype.dispose=function(){if(this.disposeFunction){this.disposeFunction()}delete this.disposeFunction};return l});c("wipeout.base.visual",function(){var m=k.base.object.extend(function(n){this._super();this.woInvisible=this.constructor.woInvisibleDefault;this.templateItems={};this.templateId=ko.observable(n||m.getDefaultTemplateId());this.__woBag={disposables:{},createdByWipeout:false,rootHtmlElement:null,routedEventSubscriptions:[],renderedChildren:[]}},"visual");m.woInvisibleDefault=false;m.prototype.disposeOf=function(n){if(this.__woBag.disposables[n]){this.__woBag.disposables[n]();delete this.__woBag.disposables[n]}};m.prototype.disposeOfAll=function(){for(var n in this.__woBag.disposables){this.disposeOf(n)}};m.prototype.registerDisposable=(function(){var n=0;return function(o){if(!o||o.constructor!==Function){throw"The dispose function must be a Function"}var p=(++n).toString();this.__woBag.disposables[p]=o;return p}})();m.prototype.unTemplate=function(){e(this.__woBag.renderedChildren.splice(0,this.__woBag.renderedChildren.length),function(p){if(p instanceof m){if(p.__woBag.createdByWipeout){p.dispose()}else{p.unRender()}}});e(this.templateItems,function(q,p){delete this.templateItems[p]},this);if(this.__woBag.rootHtmlElement){var n=document.contains?document:document.getElementsByTagName("body")[0];if(n){if(n.contains(this.__woBag.rootHtmlElement)){ko.virtualElements.emptyNode(this.__woBag.rootHtmlElement)}else{console.warn("Warning, could not dispose of html element correctly. This element has been manually moved from the DOM (not by knockout)")}}else{try{ko.virtualElements.emptyNode(this.__woBag.rootHtmlElement)}catch(o){console.warn("Warning, could not dispose of html element correctly. This element has been manually moved from the DOM (not by knockout)")}}}};m.prototype.unRender=function(){this.onUnrender();this.unTemplate();if(this.__woBag.rootHtmlElement){ko.utils.domData.set(this.__woBag.rootHtmlElement,k.bindings.wipeout.utils.wipeoutKey,undefined);delete this.__woBag.rootHtmlElement}};m.prototype.dispose=function(){this.unRender();for(var n in this){if(ko.isObservable(this[n])&&this[n].dispose instanceof Function){this[n].dispose()}}e(this.__woBag.routedEventSubscriptions.splice(0,this.__woBag.routedEventSubscriptions.length),function(o){o.dispose()})};m.getParentElement=function(p){var o=0;var n=p.previousSibling;while(n){if(k.utils.ko.virtualElements.isVirtualClosing(n)){o--}if(k.utils.ko.virtualElements.isVirtual(n)){if(o===0){return n}o++}n=n.previousSibling}return p.parentNode};m.prototype.getParents=function(){var n=this;var o=[];while(n){o.push(n);n=n.getParent()}return o};m.prototype.getParent=function(){if(this.__woBag.rootHtmlElement==null){return null}var o;var n=m.getParentElement(this.__woBag.rootHtmlElement);while(n){if(o=ko.utils.domData.get(n,k.bindings.wipeout.utils.wipeoutKey)){return o}n=m.getParentElement(n)}};m.prototype.unRegisterRoutedEvent=function(r,n,o){for(var p=0,q=this.__woBag.routedEventSubscriptions.length;p<q;p++){if(this.__woBag.routedEventSubscriptions[p].routedEvent===r){this.__woBag.routedEventSubscriptions[p].event.unRegister(n,o);return true}}return false};m.prototype.registerRoutedEvent=function(s,n,o){var r;for(var p=0,q=this.__woBag.routedEventSubscriptions.length;p<q;p++){if(this.__woBag.routedEventSubscriptions[p].routedEvent===s){r=this.__woBag.routedEventSubscriptions[p];break}}if(!r){r=new k.base.routedEventRegistration(s);this.__woBag.routedEventSubscriptions.push(r)}return r.event.register(n,o)};m.prototype.triggerRoutedEvent=function(r,n){if(!(n instanceof k.base.routedEventArgs)){n=new k.base.routedEventArgs(n,this)}for(var o=0,p=this.__woBag.routedEventSubscriptions.length;o<p;o++){if(n.handled){return}if(this.__woBag.routedEventSubscriptions[o].routedEvent===r){this.__woBag.routedEventSubscriptions[o].event.trigger(n)}}if(!n.handled){var q=this.getParent();if(q){q.triggerRoutedEvent(r,n)}}};m.prototype.onRendered=function(o,n){};m.prototype.onUnrender=function(){};m.prototype.onApplicationInitialized=function(){};m.getDefaultTemplateId=(function(){var n=null;return function(){if(!n){n=k.base.contentControl.createAnonymousTemplate("<span>No template has been specified</span>")}return n}})();m.getBlankTemplateId=(function(){var n=null;return function(){if(!n){n=k.base.contentControl.createAnonymousTemplate("")}return n}})();m.visualGraph=function(p,n){if(!p){return[]}n=n||function(){return typeof arguments[0]};var o=[];k.utils.obj.enumerate(k.utils.html.getAllChildren(p),function(r){k.utils.obj.enumerate(m.visualGraph(r),o.push,o)});var q=ko.utils.domData.get(p,k.bindings.wipeout.utils.wipeoutKey);if(q){return[{viewModel:q,display:n(q),children:o}]}return o};var l=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","head","header","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","map","mark","menu","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"];m.reservedTags={};e(l,function(n){m.reservedTags[n]=true});return m});c("wipeout.base.view",function(){var l="wo.view.modelRoutedEvents";var m=k.base.visual.extend(function(o,n){this._super(o);if(n===undefined){n=null}this.model=ko.observable(n);this.registerDisposable(this.model.subscribe(function(p){try{this.onModelChanged(n,p)}finally{n=p}},this).dispose);this.__woBag.bindings={}},"view");m.setObservable=function(n,o,p){if(ko.isObservable(n[o])){n[o](ko.utils.unwrapObservable(p))}else{n[o]=ko.utils.unwrapObservable(p)}};m.prototype.disposeOfBinding=function(n){if(this.__woBag.bindings[n]){this.__woBag.bindings[n].dispose()}};m.prototype.dispose=function(){this._super();if(this.__woBag[l]){this.__woBag[l].dispose();delete this.__woBag[l]}for(var n in this.__woBag.bindings){this.disposeOfBinding(n)}};m.prototype.onInitialized=function(){};m.prototype.bind=function(o,v,s){if(s&&(!ko.isObservable(this[o])||!ko.isObservable(v()))){throw"Two way bindings must be between 2 observables"}this.disposeOfBinding(o);var r=ko.dependentObservable({read:function(){return ko.utils.unwrapObservable(v())},write:s?function(){var w=v();if(w){w(arguments[0])}}:undefined});var t=false;var u=false;m.setObservable(this,o,r.peek());var p=r.subscribe(function(w){if(!t){try{u=true;m.setObservable(this,o,w)}finally{u=false}}},this);var q=s?this[o].subscribe(function(w){if(!u){try{t=true;m.setObservable({x:r},"x",w)}finally{t=false}}},this):null;var n=this;return this.__woBag.bindings[o]=new k.base.disposable(function(){if(p){p.dispose();p=null}if(q){q.dispose();q=null}if(r){r.dispose();r=null}delete n.__woBag.bindings[o]})};m.elementHasModelBinding=function(n){for(var o=0,p=n.attributes.length;o<p;o++){if(n.attributes[o].nodeName==="model"||n.attributes[o].nodeName==="model-tw"){return true}}for(var o=0,p=n.childNodes.length;o<p;o++){if(n.childNodes[o].nodeType===1&&n.childNodes[o].nodeName==="model"){return true}}return false};m.reservedPropertyNames=["constructor","constructor-tw","id","id-tw"];m.prototype.initialize=function(q,o){if(this._initialized){throw"Cannot call initialize item twice"}this._initialized=true;if(!q){return}var p=q.getAttribute("woInvisible");if(p){this.woInvisible=h(p)}if(!m.elementHasModelBinding(q)&&k.utils.ko.peek(this.model)==null){this.bind("model",o.$data.model)}var n=this.woInvisible?o:o.createChildContext(this);e(q.attributes,function(r){if(m.reservedPropertyNames.indexOf(r.nodeName)!==-1){return}var s=r.nodeName,t="";if(s.indexOf("-tw")===r.nodeName.length-3){s=s.substr(0,s.length-3);t=",            function(val) {                if(!ko.isObservable("+r.value+"))                    throw 'Two way bindings must be between 2 observables';                "+r.value+"(val);            }"}try{n.__$woCurrent=this;k.template.engine.createJavaScriptEvaluatorFunction("(function() {            __$woCurrent.bind('"+s+"', function() {                return "+r.value+";            }"+t+");            return '';        })()")(n)}finally{delete n.__$woCurrent}},this);e(q.childNodes,function(r,s){if(r.nodeType!==1||m.reservedPropertyNames.indexOf(r.nodeName)!==-1){return}var x="string";for(var u=0,v=r.attributes.length;u<v;u++){if(r.attributes[u].nodeName==="constructor"&&r.attributes[u].nodeValue){x=r.attributes[u].nodeValue;break}}if(m.objectParser[j(x)]){var t=[];var w=w||new XMLSerializer();for(var u=0,v=r.childNodes.length;u<v;u++){if(r.childNodes[u].nodeType==3){t.push(r.childNodes[u].nodeValue)}else{t.push(w.serializeToString(r.childNodes[u]))}}var y=m.objectParser[j(x)](t.join(""));m.setObservable(this,r.nodeName,y)}else{var y=k.utils.obj.createObject(x);if(y instanceof k.base.view){y.__woBag.createdByWipeout=true;y.initialize(r,n)}m.setObservable(this,r.nodeName,y)}},this)};m.objectParser={json:function(n){return JSON.parse(n)},string:function(n){return n},bool:function(o){var n=j(o);return n?n!=="false"&&n!=="0":false},"int":function(n){return parseInt(i(n))},"float":function(n){return parseFloat(i(n))},regexp:function(n){return new RegExp(i(n))},date:function(n){return new Date(i(n))}};m.prototype.onModelChanged=function(o,n){if(o!==n){this.disposeOf(this.__woBag[l]);if(n instanceof k.base.routedEventModel){this.__woBag[l]=this.registerDisposable(n.__triggerRoutedEventOnVM.register(this.onModelRoutedEvent,this).dispose)}}};m.prototype.onModelRoutedEvent=function(n){if(!(n.routedEvent instanceof k.base.routedEvent)){throw"Invaid routed event"}this.triggerRoutedEvent(n.routedEvent,n.eventArgs)};return m});c("wipeout.debug",function(){var l=function(){if(!window.jQuery){throw"This debug tool requires jQuery"}};return{renderedItems:function(o,n){var p=[],q;var m=function(r){if(r){switch(r.nodeType){case 1:e(r.childNodes,m);case 8:if((q=k.utils.html.getViewModel(r))&&p.indexOf(q)===-1&&(!n||q.constructor===n)){p.push(q)}}}};m(o||document.getElementsByTagName("body")[0]);return p}}});c("wipeout.base.contentControl",function(){var l=k.base.view.extend(function(p,o){this._super(p||k.base.visual.getBlankTemplateId(),o);this.template=l.createTemplatePropertyFor(this.templateId,this)},"contentControl");l.createTemplatePropertyFor=function(q,p){var o=ko.dependentObservable({read:function(){var r=document.getElementById(q());return r?r.textContent:""},write:function(r){q(k.base.contentControl.createAnonymousTemplate(r))},owner:p});if(p instanceof k.base.visual){p.registerDisposable(o.dispose)}return o};var m="data-templatehash";var n=(function(){var q=null;var o=Math.floor(Math.random()*1000000000);var p=function(){if(!q){q=k.utils.html.createElement("<div style='display: none'></div>");document.body.appendChild(q)}};return{create:function(w,r){p();w=i(w);var s=l.hashCode(w).toString();if(!r){for(var u=0,v=q.childNodes.length;u<v;u++){if(q.childNodes[u].nodeType===1&&q.childNodes[u].nodeName==="SCRIPT"&&q.childNodes[u].id&&q.childNodes[u].attributes[m]&&q.childNodes[u].attributes[m].nodeValue===s&&q.childNodes[u].innerHTML===w){return q.childNodes[u].id}}}var t="AnonymousTemplate"+(++o);q.innerHTML+='<script type="text/xml" id="'+t+'" '+m+'="'+s+'">'+w+"</script>";return t},del:function(s){p();for(var r=0;r<q.childNodes.length;r++){if(q.childNodes[r].nodeType===1&&q.childNodes[r].nodeName==="SCRIPT"&&q.childNodes[r].id===s){q.removeChild(q.childNodes[r]);r--}}}}})();l.createAnonymousTemplate=n.create;l.deleteAnonymousTemplate=n.del;l.hashCode=function(s){var p=0;for(var q=0,r=s.length;q<r;q++){var o=s.charCodeAt(q);p=((p<<5)-p)+o;p=p&p}return p};return l});var k=k||{};k.base=k.base||{};c("wipeout.base.eventRegistration",function(){return k.base.disposable.extend(function(l,m,n){this._super(n);this.callback=l;this.context=m})});c("wipeout.base.event",function(){var l=function(){this._registrations=[]};l.prototype.trigger=function(m){for(var n=0,o=this._registrations.length;n<o;n++){if(m instanceof k.base.routedEventArgs&&m.handled){return}this._registrations[n].callback.call(this._registrations[n].context,m)}};l.prototype.unRegister=function(m,n){n=n==null?window:n;for(var o=0;o<this._registrations.length;o++){if(this._registrations[o].callback===m&&this._registrations[o].context===n){this._registrations.splice(o,1);o--}}};l.prototype.dispose=function(){this._registrations.length=0};l.prototype.register=function(m,n){if(!(m instanceof Function)){throw"Invalid event callback"}var p=this._registrations;var o={callback:m,context:n==null?window:n,dispose:function(){var q=p.indexOf(o);if(q>=0){p.splice(q,1)}}};this._registrations.push(o);return new k.base.eventRegistration(o.callback,o.context,o.dispose)};return l});c("wipeout.base.if",function(){var m=true;var n=function(){if(!m){return}m=false;l.blankTemplateId=k.base.contentControl.createAnonymousTemplate("",true)};var l=k.base.contentControl.extend(function(p,o){n();this._super(p,o);this.condition=ko.observable();this.elseTemplateId=ko.observable(l.blankTemplateId);this.registerDisposable(this.elseTemplateId.subscribe(this.elseTemplateChanged,this).dispose);this.elseTemplate=k.base.contentControl.createTemplatePropertyFor(this.elseTemplateId,this);this.__cachedTemplateId=this.templateId();this.registerDisposable(this.condition.subscribe(this.onConditionChanged,this).dispose);this.registerDisposable(this.templateId.subscribe(this.copyTemplateId,this).dispose);this.copyTemplateId(this.templateId())},"_if");l.woInvisibleDefault=true;l.prototype.elseTemplateChanged=function(o){if(!this.condition()){this.templateId(o)}};l.prototype.onConditionChanged=function(o){if(this.__oldConditionVal&&!o){this.templateId(this.elseTemplateId())}else{if(!this.__oldConditionVal&&o){this.templateId(this.__cachedTemplateId)}}this.__oldConditionVal=!!o};l.prototype.copyTemplateId=function(o){if(o!==this.elseTemplateId()){this.__cachedTemplateId=o}if(!this.condition()&&o!==this.elseTemplateId()){this.templateId(this.elseTemplateId())}};return l});c("wipeout.base.itemsControl",function(){var l;var n=function(){if(l){return}l=k.base.contentControl.createAnonymousTemplate("<div data-bind='itemsControl: null'></div>")};var m=k.base.contentControl.extend(function(q,o,p){n();this._super(q||l,p);this.itemTemplateId=ko.observable(o);this.itemTemplate=k.base.contentControl.createTemplatePropertyFor(this.itemTemplateId,this);this.itemSource=ko.observableArray([]);this.items=ko.observableArray([]);if(k.utils.ko.version()[0]<3){m.subscribeV2.call(this)}else{m.subscribeV3.call(this)}this.registerDisposable(this.items.subscribe(this.syncModelsAndViewModels,this).dispose);o=this.itemTemplateId.peek();this.registerDisposable(this.itemTemplateId.subscribe(function(r){if(o!==r){try{this.reDrawItems()}finally{o=r}}},this).dispose)},"itemsControl");m.subscribeV2=function(){var p=this.itemSource.peek();this.registerDisposable(this.itemSource.subscribe(function(){try{if(this.modelsAndViewModelsAreSynched()){return}this._itemSourceChanged(ko.utils.compareArrays(p,arguments[0]||[]))}finally{p=k.utils.obj.copyArray(arguments[0]||[])}},this).dispose);var o=this.items.peek();this.registerDisposable(this.items.subscribe(function(){try{this._itemsChanged(ko.utils.compareArrays(o,arguments[0]||[]))}finally{o=k.utils.obj.copyArray(arguments[0]||[])}},this).dispose)};m.subscribeV3=function(){this.registerDisposable(this.itemSource.subscribe(this._itemSourceChanged,this,"arrayChange").dispose);this.registerDisposable(this.items.subscribe(this._itemsChanged,this,"arrayChange").dispose)};m.prototype.syncModelsAndViewModels=function(){var o=false,r=false;var s=this.itemSource();if(s==null){r=true;s=[]}var t=this.items();if(s.length!==t.length){o=true;s.length=t.length}for(var p=0,q=t.length;p<q;p++){if(t[p].model()!==s[p]){s[p]=t[p].model();o=true}}if(o){if(r){this.itemSource(s)}else{this.itemSource.valueHasMutated()}}};m.prototype.modelsAndViewModelsAreSynched=function(){var q=this.itemSource()||[];var r=this.items()||[];if(q.length!==r.length){return false}for(var o=0,p=q.length;o<p;o++){if(q[o]!==r[o].model()){return false}}return true};m.prototype._itemsChanged=function(o){e(o,function(p){if(p.status===k.utils.ko.array.diff.deleted&&p.moved==null){this.onItemDeleted(p.value)}else{if(p.status===k.utils.ko.array.diff.added&&p.moved==null){this.onItemRendered(p.value)}}},this)};m.prototype._itemSourceChanged=function(p){var u=this.items();var q=[],o=[],v={},r=0;for(var s=0,t=p.length;s<t;s++){if(p[s].status===k.utils.ko.array.diff.retained){continue}else{if(p[s].status===k.utils.ko.array.diff.deleted){q.push((function(w){return function(){var x=u.splice(w.index+r,1)[0];if(w.moved!=null){v[w.moved+"."+w.index]=x}r--}})(p[s]))}else{if(p[s].status===k.utils.ko.array.diff.added){o.push((function(w){return function(){var x=w.moved!=null?v[w.index+"."+w.moved]:this._createItem(w.value);u.splice(w.index,0,x)}})(p[s]))}else{throw"Unsupported status"}}}}for(s=0,t=q.length;s<t;s++){q[s].call(this)}for(s=0,t=o.length;s<t;s++){o[s].call(this)}this.items.valueHasMutated()};m.prototype.onItemRendered=function(o){};m.prototype.onItemDeleted=function(o){var p=this.__woBag.renderedChildren.indexOf(o);if(p!==-1){this.__woBag.renderedChildren.splice(p,1)}o.dispose()};m.prototype._createItem=function(p){var o=this.createItem(p);o.__woBag.createdByWipeout=true;return o};m.prototype.createItem=function(o){return new k.base.view(this.itemTemplateId(),o)};m.prototype.reDrawItems=function(){var q=this.itemSource()||[];var r=this.items();r.length=q.length;for(var o=0,p=q.length;o<p;o++){r[o]=this._createItem(q[o])}this.items.valueHasMutated()};return m});c("wipeout.base.routedEvent",function(){var l=function(){};l.prototype.trigger=function(n,m){n.triggerRoutedEvent(this,new k.base.routedEventArgs(m,n))};l.prototype.unRegister=function(m,o,n){return o.unRegisterRoutedEvent(this,m,n)};l.prototype.register=function(m,o,n){return o.registerRoutedEvent(this,m,n)};return l});c("wipeout.base.routedEventArgs",function(){var l=function(m,n){this.handled=false;this.data=m;this.originator=n};return l});c("wipeout.base.routedEventRegistration",function(){var l=function(m){this.routedEvent=m;this.event=new k.base.event()};l.prototype.dispose=function(){this.event.dispose()};return l});c("wipeout.base.routedEventModel",function(){var l=k.base.object.extend(function(){this.__triggerRoutedEventOnVM=new wo.event()});l.prototype.triggerRoutedEvent=function(n,m){this.__triggerRoutedEventOnVM.trigger({routedEvent:n,eventArgs:m})};return l});b("itemsControl",true,function(){var m="";var n=null;var o=function(){if(n){return}var r="<!-- ko ic-render: $data";if(d){r+=", wipeout-type: 'items[' + wipeout.utils.ko.peek($index) + ']'"}r+=" --><!-- /ko -->";n=k.base.contentControl.createAnonymousTemplate(r)};var l=function(t,v,r,w,s){var u=k.utils.ko.peek(w);if(u&&!(u instanceof k.base.itemsControl)){throw"This binding can only be used on an itemsControl"}o();return ko.bindingHandlers.template.init.call(this,t,q.createAccessor(w),r,w,s)};var p=function(t,v,r,w,s){var u=k.utils.ko.peek(w);if(u&&!(u instanceof k.base.itemsControl)){throw"This binding can only be used on an itemsControl"}return ko.bindingHandlers.template.update.call(this,t,q.createAccessor(w),r,w,s)};var q={createAccessor:function(r){r=k.utils.ko.peek(r);return function(){return{name:n,foreach:r.items,templateEngine:k.template.engine.instance}}}};return{init:l,update:p,utils:q}});b("ic-render",true,function(){var l=function(p,q,n,r,o){return k.bindings.render.init.call(this,p,q,n,o.$parent,o.$parentContext)};var m=function(p,q,n,r,o){return k.bindings.render.update.call(this,p,q,n,o.$parent,o.$parentContext)};return{init:l,update:m}});b("render",true,function(){var m=function(q,r,o,s,p){return ko.bindingHandlers.template.init.call(this,q,k.bindings.render.utils.createValueAccessor(r),o,s,p)};var n=function(s,v,p,w,q){var r=k.utils.ko.peek(k.utils.ko.peek(v()));if((w&&!(w instanceof k.base.visual))||(r&&!(r instanceof k.base.visual))){throw"This binding can only be used to render a wo.visual within the context of a wo.visual"}if(r&&w&&r===w){throw"A wo.visual cannot be a child of itself."}if(r&&r.__woBag.rootHtmlElement){throw"This visual has already been rendered. Call its unRender() function before rendering again."}var o=this;var u=function(){if(r){r.unTemplate()}ko.bindingHandlers.template.update.call(o,s,k.bindings.render.utils.createValueAccessor(v),p,r,q);var x=p();if(x["wipeout-type"]){k.bindings["wipeout-type"].utils.comment(s,x["wipeout-type"])}};var t=ko.utils.domData.get(s,k.bindings.wipeout.utils.wipeoutKey);if(t instanceof k.base.visual){if(t.__woBag.createdByWipeout){t.dispose()}else{t.unRender()}}if(r){ko.utils.domData.set(s,k.bindings.wipeout.utils.wipeoutKey,r);r.__woBag.rootHtmlElement=s;if(w){w.__woBag.renderedChildren.push(r)}r.templateId.subscribe(u)}u()};var l=function(o){return function(){var q=o();var p=ko.utils.unwrapObservable(q);var r={templateEngine:k.template.engine.instance,name:p?p.templateId.peek():"",afterRender:p?function(t,s){var u=p.nodes||[];p.nodes=t;p.onRendered(u,t)}:undefined};if(q&&!q.woInvisible){r.data=q||{}}return r}};return{init:m,update:n,utils:{createValueAccessor:l}}});b("wipeout-type",true,function(){var l="wipeout-type";return{init:function(){},utils:{comment:function(m,o){o=k.utils.ko.peek(o);if(m.nodeType===1){if(m.childNodes.length){m.insertBefore(document.createComment(o),m.childNodes[0])}else{m.appendChild(document.createComment(o))}}else{if(m.nodeType===8){var n;if(!(n=ko.utils.domData.get(m,l))){ko.utils.domData.set(m,l,n=m.textContent)}m.textContent=n+" wipeout-type: "+o}}}}}});b("wipeout",true,function(){var m=function(p,s,n,u,o){if(ko.utils.domData.get(p,k.bindings.wipeout.utils.wipeoutKey)){throw"This element is already bound to another model"}var r=s();if(!r){throw"Invalid view type"}var t=new r();if(!(t instanceof k.base.view)){throw"Invalid view type"}t.model(u);var q=ko.bindingHandlers.render.init.call(this,p,l(t),n,null,o);ko.bindingHandlers.render.update.call(this,p,l(t),n,null,o);t.onApplicationInitialized();return q};var l=function(n){return function(){return n}};return{init:m,utils:{createValueAccessor:l,wipeoutKey:"__wipeout"}}});b("wo",true,function(){var l=function(p,s,m,t,n){var r=k.template.engine.scriptCache[s()](n);if(r.id){var o=n;while(o.$data.woInvisible){o=o.$parentContext}o.$data.templateItems[r.id]=r.vm}var q=k.bindings.render.init.call(this,p,function(){return r.vm},m,t,n);k.bindings.render.update.call(this,p,function(){return r.vm},m,t,n);return q};return{init:l}});c("wipeout.profile.profiler",function(){var m=function(){if(!window.jQuery){throw"This debug tool requires jQuery"}};var n=k.base.object.extend(function(p){m();this.vm=p;this.cssClass="wipeout-profiler-"+n.newId()});n.createStyle=function(){if(n.style){return}n.style=document.createElement("style");$("body").append(n.style)};n.prototype.allNodes=function(){var p=$(k.utils.html.getAllChildren(this.vm.__woBag.rootHtmlElement));return p.find("*").add(p)};var l=".wipeoutProfiler";n.prototype.profile=function(){n.createStyle();var q=this.vm;var p=this;this.allNodes().addClass(p.cssClass).on("click"+l,function(r){r.preventDefault();r.stopPropagation();k.profile.utils.popup(k.profile.utils.generateInfo(q))});n.style.innerHTML+="."+this.cssClass+" {background-color:#efcdd9 !important;}"};n.prototype.dispose=function(){this.allNodes().off("click"+l).removeClass(this.cssClass)};n.newId=(function(){var p=0;return function(){return ++p}})();function o(){this.items=[]}o.prototype.push=function(q){var p=this;var r=function(){p.items.splice(p.items.indexOf(r),1);q();if(p.items.length){p.items.splice(0,1)[0](p)}};this.items.push(r);if(this.items[0]===r){r()}};n.profile=function(){var t;var s=new o();var p=null;var r={dispose:function(){}};$("body").on("mouseover",function(q){if(!q.fromElement||p===q.fromElement){return}p=q.fromElement;var u=k.utils.html.getViewModel(p);if(!u||u===r.vm){return}if(t){clearTimeout(t)}t=setTimeout(function(){s.push(function(){r.dispose();r=new n(u);r.profile()})},100)})};return n});c("wipeout.profile.utils",function(){var l=function(){if(!window.jQuery){throw"This debug tool requires jQuery"}};return{generateColour:function(){var o=Math.floor((k.utils.obj.random(255)+255)/2);var n=Math.floor((k.utils.obj.random(255)+255)/2);var m=Math.floor((k.utils.obj.random(255)+255)/2);return o.toString(16)+n.toString(16)+m.toString(16)},generateInfo:function(m){return m.__woBag.rootHtmlElement.textContent},popup:function(n){var m=$('<div style="z-index: 100000; position: fixed; top: 10%; left: 10%; background-color: white; height: 80%; width: 80%">                <div>'+n+'</div>                <button id="wipeoutProfileCloseButton">Close</button>            </div>');m.find("#wipeoutProfileCloseButton").on("click",function(){$(this).parent().remove()});$("body").append(m[0])}}});c("wipeout.template.engine",function(){var l=function(){};l.prototype=new ko.templateEngine();l.createJavaScriptEvaluatorFunction=function(n){return new Function("bindingContext","with(bindingContext) {\n\twith($data) {\n\t\treturn "+n+";\n\t}\n}")};l.createJavaScriptEvaluatorBlock=function(n){var o=l.newScriptId();if(n instanceof Function){l.scriptCache[o]=n}else{l.scriptCache[o]=l.createJavaScriptEvaluatorFunction(n)}return l.openCodeTag+o+l.closeCodeTag};l.prototype.createJavaScriptEvaluatorBlock=function(n){return l.createJavaScriptEvaluatorBlock(n)};l.prototype.rewriteTemplate=function(p,n,q){var o=document.getElementById(p);if(o instanceof HTMLElement){if(!l.scriptHasBeenReWritten.test(o.textContent)){ko.templateEngine.prototype.rewriteTemplate.call(this,p,n,q)}else{this.makeTemplateSource(p,q).data("isRewritten",true)}this.wipeoutRewrite(o,n)}else{ko.templateEngine.prototype.rewriteTemplate.call(this,p,n,q)}};l.wipeoutRewrite=function(t,r){if(k.base.visual.reservedTags[t.nodeName]){for(var n=0;n<t.childNodes.length;n++){if(t.childNodes[n].nodeType===1){l.wipeoutRewrite(t.childNodes[n],r)}}}else{var o=l.newScriptId();l.scriptCache[o]=function(u){var v=k.utils.obj.createObject(t.nodeName);if(!(v instanceof k.base.view)){throw"Only wo.view elements can be created in this way"}v.__woBag.createdByWipeout=true;v.initialize(t,u);return{vm:v,id:l.getId(t)}};var s="<!-- ko";if(d){s+=" wipeout-type: '"+t.nodeName+"',"}s+=" wo: "+o+" --><!-- /ko -->";var q=new DOMParser().parseFromString("<root>"+r(s)+"</root>","application/xml").documentElement;while(q.childNodes.length){var p=q.childNodes[0];p.parentNode.removeChild(p);t.parentNode.insertBefore(p,t)}t.parentNode.removeChild(t)}};l.getId=function(p){for(var n=0,o=p.attributes.length;n<o;n++){if(p.attributes[n].nodeName==="id"){return p.attributes[n].value}}return null};l.prototype.wipeoutRewrite=function(p,o){var r=new XMLSerializer();var s=new DOMParser().parseFromString("<root>"+p.textContent+"</root>","application/xml").documentElement;if(s.firstChild&&s.firstChild.nodeName==="parsererror"){throw"Invalid xml template:\n"+r.serializeToString(s.firstChild)}var q=[];for(var n=0;n<s.childNodes.length;n++){if(s.childNodes[n].nodeType===1){l.wipeoutRewrite(s.childNodes[n],o)}q.push(r.serializeToString(s.childNodes[n]))}p.textContent=q.join("")};l.prototype.renderTemplateSource=function(r,n,p){if(!(n.$data instanceof k.base.view)){return[]}var o=r.data("precompiled");if(!o){o=new k.template.htmlBuilder(r.text());r.data("precompiled",o)}var q;ko.dependentObservable(function(){q=o.render(n)},this).dispose();return q};if(d){var m=function(n){l.prototype[n]=function(){ko.templateEngine.prototype[n].apply(this,arguments)}};m("isTemplateRewritten");m("makeTemplateSource");m("renderTemplate")}l.newScriptId=(function(){var n=Math.floor(Math.random()*10000);return function(){return(++n).toString()}})();l.scriptCache={};l.openCodeTag="<!-- wipeout_code: {";l.closeCodeTag="} -->";l.scriptHasBeenReWritten=RegExp(l.openCodeTag.replace("{","{")+"[0-9]+"+l.closeCodeTag.replace("}","}"));l.instance=new l();return l});c("wipeout.template.htmlBuilder",function(){var l=function(m){this.preRendered=[];this.generatePreRender(m)};l.prototype.render=function(m){var n=[];var s=[];for(var p=0,q=this.preRendered.length;p<q;p++){if(this.preRendered[p] instanceof Function){var r=this.preRendered[p](m);s.push(r)}else{s.push(this.preRendered[p])}}var o=k.utils.html.createElements(s.join(""));e(l.getTemplateIds({childNodes:o}),function(u,t){m.$data.templateItems[t]=u});if(m.$data instanceof k.base.view){m.$data.onInitialized()}return o};l.prototype.generatePreRender=function(s){var t=new DOMParser().parseFromString("<root>"+s+"</root>","application/xml").documentElement;if(t.firstChild&&t.firstChild.nodeName==="parsererror"){var p=new XMLSerializer();throw"Invalid xml template:\n"+p.serializeToString(t.firstChild)}var r=k.template.htmlBuilder.generateTemplate(t);var o=k.template.engine.openCodeTag;var m=k.template.engine.closeCodeTag;this.preRendered.length=0;var q,n;while((q=r.indexOf(o))!==-1){this.preRendered.push(r.substr(0,q));r=r.substr(q);n=r.indexOf(m);if(n===-1){throw"Invalid wipeout_code tag."}this.preRendered.push((function(u){return k.template.engine.scriptCache[u]})(r.substr(o.length,n-o.length)));r=r.substr(n+m.length)}this.preRendered.push(r)};l.getTemplateIds=function(m){var n={};e(m.childNodes,function(q){if(q.nodeType===1){for(var o=0,p=q.attributes.length;o<p;o++){if(q.attributes[o].nodeName==="id"){n[q.attributes[o].nodeValue]=q;break}}e(l.getTemplateIds(q),function(r,s){n[s]=r})}});return n};l.generateTemplate=function(o){var m=[];var n=new XMLSerializer();e(o.childNodes,function(q){if(q.nodeType==1){var p=new DOMParser().parseFromString(n.serializeToString(q),"application/xml").documentElement;while(p.childNodes.length){p.removeChild(p.childNodes[0])}var r=k.utils.html.createElement(n.serializeToString(p));r.innerHTML=k.template.htmlBuilder.generateTemplate(q);m.push(k.utils.html.outerHTML(r))}else{if(q.nodeType===3){m.push(q.data)}else{m.push(n.serializeToString(q))}}});return m.join("")};return l});c("wipeout.utils.html",function(){var v=function(B){if(!B){return null}if(B.constructor===HTMLHtmlElement){throw"Cannot serialize a Html element using outerHTML"}var C=B.nodeType===1?(x[B.tagName.toLowerCase()]||"div"):"div";var A=document.createElement(C);A.appendChild(B.cloneNode(true));return A.innerHTML};var z=/[a-zA-Z0-9]/;var r=function(C){C=C.replace(/^\s+|\s+$/g,"");if(!C||C[0]!=="<"){throw"Invalid html tag"}C=C.substring(1).replace(/^\s+|\s+$/g,"");for(var A=0,B=C.length;A<B;A++){if(!z.test(C[A])){break}}return C.substring(0,A)};var y=/<\!--[^>]*-->/g;var q=function(A){A=A.replace(y,"").replace(/^\s+|\s+$/g,"");var B=0;if((B=A.indexOf("<"))===-1){return null}return r(A.substring(B))};var x={area:"map",base:"head",basefont:"head",body:"html",caption:"table",col:"colgroup",colgroup:"table",command:"menu",frame:"frameset",frameset:"html",head:"html",keygen:"form",li:"ul",optgroup:"select",option:"select",rp:"rt",rt:"ruby",source:"audio",tbody:"table",td:"tr",tfoot:"table",th:"tr",thead:"table",tr:"tbody"};var l={html:true,basefont:true,base:true,body:true,frame:true,frameset:true,head:true};function o(E,B){for(var C=0,D=E.childNodes.length;C<D;C++){var A=E.childNodes[C];if(A.nodeType===1&&k.utils.obj.trimToLower(A.tagName)===k.utils.obj.trimToLower(B)){return A}}}var u={audio:true,col:true,colgroup:true,frameset:true,head:true,rp:true,rt:true,ruby:true,select:true,style:true,table:true,tbody:true,tfooy:true,thead:true,title:true,tr:true};var w={keygen:"select"};var m=function(B){var E=k.utils.obj.trimToLower(r(B));if(l[E]){throw'Cannot create an instance of the "'+E+'" tag.'}var D=x[E]||"div";if(ko.utils.ieVersion&&u[D]){return o(m("<"+D+">"+B+"</"+D+">"),E)}var C=document.createElement(D);C.innerHTML=B;function A(I){if(!I){return null}for(var G=0,H=C.childNodes.length;G<H;G++){if(C.childNodes[G].nodeType===1&&C.childNodes[G].tagName.toLowerCase()===I){var F=C.childNodes[G];C.removeChild(F);return F}}return null}return A(E)||A(w[E])};var n=function(B){if(B==null){return[]}var E=q(B)||"div";var D=x[r("<"+E+"/>")]||"div";B="<"+E+"></"+E+">"+B+"<"+E+"></"+E+">";var A=document.createElement(D);A.innerHTML=B;var C=[];while(A.firstChild){C.push(A.firstChild);A.removeChild(A.firstChild)}C.splice(0,1);C.splice(C.length-1,1);return C};var p=function(C){var A=[];if(k.utils.ko.virtualElements.isVirtual(C)){var G=k.utils.ko.virtualElements.parentElement(C);for(var D=0,E=G.childNodes.length;D<E;D++){if(G.childNodes[D]===C){break}}D++;for(var E=G.childNodes.length;D<E;D++){A.push(G.childNodes[D])}}else{A=C.childNodes}var F=[];var B=0;for(var D=0,E=A.length;D<E;D++){if(k.utils.ko.virtualElements.isVirtualClosing(A[D])){B--;if(B<0){return F}continue}if(B>0){continue}F.push(A[D]);if(k.utils.ko.virtualElements.isVirtual(A[D])){B++}}return F};var s=function(A){var C=ko.utils.domData.get(A,k.bindings.wipeout.utils.wipeoutKey);if(C){return C}var B=k.utils.ko.virtualElements.parentElement(A);if(B){return s(B)}return null};var t=function(){};t.cannotCreateTags=l;t.specialTags=x;t.getFirstTagName=q;t.getTagName=r;t.getAllChildren=p;t.outerHTML=v;t.createElement=m;t.createElements=n;t.getViewModel=s;return t});c("wipeout.utils.ko",function(){var l=function(){};l.version=function(){if(!ko||!ko.version){return null}var o=ko.version.split(".");for(var m=0,n=o.length;m<n;m++){o[m]=parseInt(o[m])}return o};l.peek=function(m){if(ko.isObservable(m)){return m.peek()}else{return m}};l.array={diff:{added:"added",deleted:"deleted",retained:"retained"}};l.isObservableArray=function(m){return ko.isObservable(m)&&m.push&&m.push.constructor===Function};l.virtualElements={parentElement:function(n){var m=n.previousSibling;while(m){if(l.virtualElements.isVirtual(m)){return m}m=m.previousSibling}return n.parentNode},isVirtual:function(m){return m.nodeType===8&&m.nodeValue.replace(/^\s+/,"").indexOf("ko")===0},isVirtualClosing:function(m){return m.nodeType===8&&i(m.nodeValue)==="/ko"}};return l});window.wo={};e(k.base,function(m,l){window.wo[l]=m});e(k.utils,function(m,l){window.wo[l]=m});var d=wo.DEBUG=false})();